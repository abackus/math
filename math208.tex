\documentclass[12pt]{report}
\usepackage[utf8]{inputenc}
\usepackage[margin=1in]{geometry} 
\usepackage{amsmath,amsthm,amssymb}
\usepackage{mathrsfs}

\usepackage{enumitem}
%\usepackage[shortlabels]{enumerate}
\usepackage{tikz-cd}
\usepackage{mathtools}
\usepackage{amsfonts}
\usepackage{amscd}
\usepackage{makeidx}
\usepackage{enumitem}
\title{$C^*$-algebras}
\author{Aidan Backus}
\date{December 2019}


\newcommand{\NN}{\mathbb{N}}
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\QQ}{\mathbb{Q}}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\CC}{\mathbb{C}}
\newcommand{\CP}{\mathbb{CP}}
\newcommand{\DD}{\mathbb{D}}

\newcommand{\AAA}{\mathcal A}
\newcommand{\BB}{\mathcal B}
\newcommand{\HH}{\mathcal H}

\newcommand{\CVect}{\mathbf{Vect}_\CC}
\newcommand{\Grp}{\mathbf{Grp}}

\newcommand{\Aut}{\operatorname{Aut}}
\newcommand{\Cantor}{\mathcal{C}}
\newcommand{\D}{\mathcal{D}}
\newcommand{\card}{\operatorname{card}}
\newcommand{\diam}{\operatorname{diam}}
\newcommand{\End}{\operatorname{End}}
\DeclareMathOperator*{\esssup}{ess\,sup}
\newcommand{\FF}{\mathcal{F}}
\newcommand{\GL}{\operatorname{GL}}
\newcommand{\Hom}{\operatorname{Hom}}
\newcommand{\id}{\operatorname{id}}
\newcommand{\Ind}{\operatorname{Ind}}
\newcommand{\interior}{\operatorname{int}}
\newcommand{\lcm}{\operatorname{lcm}}
\newcommand{\Lip}{\operatorname{Lip}}
\newcommand{\MM}{\mathcal M}
\newcommand{\OO}{\mathcal{O}}
\newcommand{\PGL}{\operatorname{PGL}}
\newcommand{\pic}{\vspace{30mm}}
\newcommand{\Prim}{\operatorname{Prim}}
\newcommand{\pset}{\mathcal{P}}
\newcommand{\Rep}{\operatorname{Rep}}
\newcommand{\Res}{\operatorname{Res}}
\newcommand{\Riem}{\mathcal{R}}
\newcommand{\RVect}{\RR\operatorname{-Vect}}
\newcommand{\Sch}{\mathcal{S}}
\newcommand{\SL}{\operatorname{SL}}
\newcommand{\Spec}{\operatorname{Spec}}
\newcommand{\spn}{\operatorname{span}}
\newcommand{\supp}{\operatorname{supp}}

\newcommand{\altrep}{\rho_{\text{alt}}}
\newcommand{\trivrep}{\rho_{\text{triv}}}
\newcommand{\regrep}{\rho_{\text{reg}}}
\newcommand{\stdrep}{\rho_{\text{std}}}

\def\Xint#1{\mathchoice
{\XXint\displaystyle\textstyle{#1}}%
{\XXint\textstyle\scriptstyle{#1}}%
{\XXint\scriptstyle\scriptscriptstyle{#1}}%
{\XXint\scriptscriptstyle\scriptscriptstyle{#1}}%
\!\int}
\def\XXint#1#2#3{{\setbox0=\hbox{$#1{#2#3}{\int}$ }
\vcenter{\hbox{$#2#3$ }}\kern-.6\wd0}}
\def\ddashint{\Xint=}
\def\dashint{\Xint-}

\renewcommand{\Re}{\operatorname{Re}}
\renewcommand{\Im}{\operatorname{Im}}
\newcommand{\dfn}[1]{\emph{#1}\index{#1}}
 
\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{axiom}[theorem]{Axiom}
\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{example}[theorem]{Example}
\newtheorem{exercise}[theorem]{Exercise}
\newtheorem{problem}[theorem]{Problem}

\makeindex
\begin{document}

\maketitle

\tableofcontents

\chapter{Preliminaries}
Here we treat functional analysis in a high level of abstraction.

Throughout these notes, we mean by $f \preceq g$ that there is a universal constant $C > 0$ such that $f \leq C g$.

\section{Locally convex spaces}
    Fix a vector space $V$.
\begin{definition}
    $V$ is said to be a \dfn{topological vector space} if it is equipped with a topology for which addition and multiplication are continuous.
\end{definition}
\begin{definition}
    $V$ is said to be \dfn{locally convex} if $V$ is equipped with a family of seminorms $P_\alpha$ and the initial topology with respect to the $P_\alpha$.
\end{definition}
    This is the smallest topology containing the open sets $P_\alpha([0, \varepsilon))$ for each $\alpha$ and each $\varepsilon > 0$ and which is translation-invariant.
    
    The most useful examples of locally convex spaces are Banach spaces.
\begin{definition}
    $V$ is said to be a \dfn{Banach space} if $V$ is equipped with the topology arising from a complete norm.
\end{definition}
\begin{definition}
    If $V$ is a topological vector space, then the \dfn{dual space} of $V^*$ is the space of \emph{continuous} linear maps $V \to \CC$.
\end{definition}
\begin{definition}
    Let $W$ be a Banach space and define a norm on $\Hom(V, W)$ by
    $$||T|| = \sup_{||v|| \leq 1} ||Tv||.$$
\end{definition}
    So $V^*$ is a normed space, $V^* \subseteq \Hom(V, \CC)$. In general it is very difficult to construct elements of $V^*$. In general we cannot guarantee constructively that $V^*$ is nontrivial. On the other hand, it is often impossible to construct linear functions which are discontinuous (for example, any linear functional on a Banach space will be continuous if it was constructed without the axiom of choice). 
\begin{definition}
    A function $f: V \to \CC$ is said to be \dfn{sublinear} if it obeys the triangle inequality and if for each $c > 0$ and $x \in V$, $f(cx) = cf(x)$. 
\end{definition}
    Obviously seminorms are sublinear. Minkowski gauges are another useful example.
\begin{definition}
    Let $K \subseteq V$. Then:
\begin{enumerate}
    \item $K$ is \dfn{convex} if for each $x, y\in K$, $c \in [0, 1]$, $cx + (1-c)y \in K$.
    \item $K$ is \dfn{balanced} if for each $c \in [0, 1]$, $cK \subseteq K$.
\end{enumerate}
    If $K$ is balanced and convex, then the \dfn{Minkowski gauge} of $K$ is the functional
    $$p_K(x) = \inf_{cK \ni x} c.$$
\end{definition}
    Notice that the balanced condition suggests that $K$ needs to be close to the origin. Moreover, Minkowski gauges are sublinear.
    
    Sublinear estimates allow us to construct functionals using the axiom of choice, while still guaranteeing that they are continuous.
\begin{theorem}[Hanh-Banach]
    \index{Hanh-Banach theorem}
    Assume that $p: V \to \CC$ is sublinear, $U \subset V$ a subspace, and $f: U \to \CC$ a linear functional. If $f$ is dominated by $p$, i.e. for each $x \in U$, $|f(x)| \leq |p(x)|$, then $f$ extends to $V$.
\end{theorem}
    In general the extension of $f$ will only be unique in case $U$ is dense. So we have to use the axiom of choice to construct $f$.
\begin{proof}
    The extension to the complex case is trivial so we replace $\CC$ with $\RR$. Assume that $f$ is defined on a space $W$, $U \subseteq W \subset V$. Choose $v \in V \setminus W$ and define $f(v)$ such that for each $w \in W$ and $s,t \geq 0$,
$$\frac{p(w-sv)}{s} \leq h(v) \leq \frac{p(w+tv) - f(w)}{t}.$$
    This is always possible because
    $$f((t+s)w) \leq p((t+s)w) = p((t+s)w + tsv - tsv) \leq p(sw + stv) + p(tw - stv)$$
    so
    $$\frac{f(w) - p(w - sv)}{s} \leq \frac{p(w+tv) - f(w)}{t}.$$
    Therefore for any $W$ and $v$ we can extend $f$ to $W + v$. If $\mathcal W$ is the family of subspaces of $V$ on which $f$ is defined and $\mathcal C \subset \mathcal W$ is a chain, then $\mathcal C$ therefore has an upper bound. Since $U \in \mathcal W$, Zorn's lemma implies that $\mathcal W$ has a maximal element, which is clearly $V$.
\end{proof}
    In case $p$ is the norm of $V$, this implies that $V^*$ is nontrivial. The Hanh-Banach theorem also has a useful geometric interpretation.
\begin{theorem}[Hanh-Banach separation theorem]
    \index{Hanh-Banach separation theorem}
    Let $\RR$ be the scalar field and $A, B \subset V$ be convex, nonempty, and disjoint. If $A$ is open then there is a $\varphi \in V^*$ and $t \in \RR$ such that for every $a \in A$ and $b \in B$,
    $$\varphi(a) < t \leq \varphi(b).$$
\end{theorem}
\begin{proof}
    Choose $a_0 \in A$ and $b_0 \in B$, and let $C = A - B + b_0 - a_0$. Then $0 \in C$, $C$ is convex, and $C = \bigcup_{b \in B} A - b + b_0 - a_0$, so $C$ is open. If $x = b_0 - a_0$, then $x \notin C$.
    
    By the Hanh-Banach theorem, choose a $\varphi \in V^*$ such that $\varphi(x_0) = 1$ and $\varphi < 1$ on $C$. Given $a \in A$ and $b \in B$ we have
    $$\varphi(a) < \varphi(b) + \varphi(a_0) - \varphi(b_0) + 1 = \varphi(b).$$
    If $t = \inf_B \varphi$, then this gives, for every $a$ and $b,$
    $$\varphi(a) \leq t \leq \varphi(b).$$
    Since $A$ is open, $\varphi(A)$ is open so the claim holds.
\end{proof}
    In particular, linear functionals separate points.

    Let's consider more properties of convexity. Let the scalar field be $\RR$ and let $S \subset V$ be nonempty, compact, and convex.
\begin{definition}
    A \dfn{face} of $S$ is a nonempty, compact, convex set $K \subseteq S$ such that for each $x \in K$, if there are $y_1, y_2 \in S$ and $c \in (0, 1)$ such that $x = cy_1 + (1-c)y_2$, then $y_1, y_2 \in K$. If $|K| = 1$, then $K$ is called an \dfn{extreme point}.
\end{definition}
\begin{definition}
    If $X \subset V$ is a set, the \dfn{convex hull} of $X$ is the smallest set containing $X$ which is closed and convex.
\end{definition}
    For example, if $S$ is a convex polygon, then the extreme points of $S$ are its vertices, and $S$ is the convex hull of its vertices. The Krein-Milman theorem says that this phenomenon happens even in infinite dimensions.
\begin{theorem}[Krein-Milman]
    \index{Krein-Milman theorem}
    $S$ is the convex hull of its extreme points.
\end{theorem}
\begin{proof}
    Assume that $S'$ is the convex hull of the extreme points of $S$. Then $S' \subseteq S$, so $S'$ is compact. If there is an $x_0 \in S \setminus S'$, then since $V^*$ separates points, there is a $\lambda \in V^*$ such that $\lambda(S') < \lambda(x_0)$. If $C = \max \lambda(x_0)$, then $\varphi^{-1}(C) \cap S$ contains no extreme points of $S$. We can contradict this by showing that every convex compact set has an extreme point.

    Let $\mathcal F$ be the set of all faces of $S$. Clearly $S \in \mathcal F$ so $\mathcal F$ is nonempty. If $\mathcal C \subset \mathcal F$ is a chain, then $\bigcap \mathcal C$ is a face, so by Zorn's lemma $\mathcal F$ has a minimal element $S_0$.
    
    Let $\varphi \in V^*$. Since $S_0$ is convex, it is connected, so $\varphi(S_0)$ is compact and connected. In particular, $\varphi(S_0) = [a, b]$ for some $a \leq b$. So $\varphi^{-1}(b) \cap S_0$ is nonempty, convex, and compact. If $x \in \varphi^{-1}(b) \cap S_0$,
    $$x = ty_1 + (1-t)y_2,$$
    then $y_1,y_2 \in S_0$. Therefore $\varphi(x) = b = c\varphi(y_1) + (1-c)\varphi(y_2)$, so $\varphi(y_1), \varphi(y_2) \geq c$. Therefore $y_1, y_2 \in \varphi^{-1}(b) \cap S_0$, so $\varphi^{-1}(b) \cap S_0$ is a face and by minimality, $\varphi^{-1}(b) \cap S_0 = S_0$. So $\varphi(S_0) = b$. Since $\varphi$ was arbitrary and $V^*$ separates points, $|S_0| = 1$. So $S$ has an extreme point. 
\end{proof}


\section{Hilbert spaces}
    \begin{definition}
    A \dfn{Hilbert space} $V$ is a Banach space whose norm arises from an inner product.
    \end{definition}
    The basic fact about Hilbert spaces $V$ is that $V^* = V$.
\begin{theorem}[Riesz representation theorem]
    \index{Riesz representation theorem for Hilbert spaces}
    The association
\begin{align*}
    V &\to V^*\\
    v &\mapsto (w \mapsto \langle v, w\rangle)
\end{align*}
    is a surjective isometry.
\end{theorem}
\begin{proof}
    Evaluating $w \mapsto \langle v, w\rangle$ at $v$, we see $||v|| = ||v||_{op}$. So we just have to check surjectivity. Let $\varphi \in V^*$, and $F = \ker \varphi$. If $F = 0$ we're done; otherwise $F^\perp$ is nonempty. Let $z \in F^\perp$ and $\alpha = \varphi(z)/||z||$. Then for any $x \in V$,
    \begin{align*}
        \langle x, \alpha z\rangle  &=  \left\langle x - \frac{\varphi(x)}{\varphi(z)} z, \alpha z\right\rangle + \left\langle \frac{\varphi(x)}{\varphi(z)}z, \alpha z\right\rangle \\&= \left\langle \frac{\varphi(x)}{\varphi(z)}z, \alpha z\right\rangle
            = \frac{\varphi(x)}{\varphi(z)} \varphi(z) = \varphi(x).
    \end{align*}
\end{proof}


\section{Bochner integration}
    Now we fix a Banach space $B$ and a measure space $(X, \Sigma, \mu)$. Recall that the \dfn{Caratheodory construction} is the standard way of building $(X, \Sigma, \mu)$: we define a semiring $\Sigma_0$ of sets (i.e. a family of sets closed under finite intersection and subsets of finite disjoint unions) and a countably additive function $\mu$ on $\Sigma_0$, which then extends to an outer measure $\mu^*$ on the power set $\pset(X)$. If $E \subseteq X$ satisfies the \dfn{Caratheodory criterion}, i.e. that for all $F \subseteq X$,
    $$\mu^*(F) = \mu^*(F \cap E) + \mu^*(F \setminus E),$$
    then we declare that $E$ is measurable. The measurable sets form a $\sigma$-algebra $\Sigma$ on which $\mu^*$ is outer measurable (note that $\mu^*$ did not have to be constructed from a semiring for this step to work; any outer measure will do) and we define the restriction $\mu$ of $\mu^*$ to $\Sigma$ to be the desired outer measure.
\begin{definition}
    A $B$-valued \dfn{integrable simple function} is a finite linear combination of functions \begin{align*}
        \chi_E^b: X &\to B\\
        E \ni x &\mapsto b\\
        E^c \ni x &\mapsto 0
    \end{align*} where $E$ is a measurable set with $||\mu(E)|| < \infty$, $b \in B$.
    
    The integral of a $B$-valued ISF $f = \sum_n \chi_{E_n}^{b_n}$ is
    $$\int_X f ~d\mu = \sum_n b_n \mu(E_n)$$
    and the $L^1$-norm is $||f||_{L^1} = \int_X |f| ~d\mu$.
\end{definition}
    Then $L^1$ is naturally the Cauchy completion of the ISF.
\begin{definition}
    A function $X \to B$ is a $B$-valued \dfn{integrable function} if it lies in $L^1$.
\end{definition}
\begin{definition}
    For $p \in (1, \infty)$, the $L^p$ norm of $f: X \to B$ is
    $$||f||_{L^p} = \left(\int_X ||f(x)||^p ~d\mu(x)\right)^{1/p}$$
    and the $L^\infty$ norm is $||f||_{L^\infty} = \lim_{p \to \infty} ||f||_{L^p} = \esssup ||f||$.
\end{definition}
    The usual Lebesgue convergence theorems hold:
\begin{theorem}[Lebesgue convergence theorems]
    Let $\{f_n\}$ be a pointwise convergent sequence of integrable functions. Then:
\begin{enumerate}
    \item If each $f_n \leq f_{n+1}$,
    $$\lim_n \int f_n = \int \lim_n f_n < \infty.$$
    \item If there is an integrable function $g > 0$ such that every $|f_n| \leq g$,
    $$\lim_n \int f_n = \int \lim_n f_n \leq g.$$
    \item $$\int \liminf_n f_n \leq \liminf_n \int f_n.$$
\end{enumerate}
\end{theorem}

    Now let's make some estimates which will actually prove that the $L^p$-norm is a norm, besides being useful later.
\begin{theorem}[Jensen's inequality]
    \index{Jensen's inequality}
    Let $f: \RR \to \RR$ be convex and $g$ an integrable function. Then
    $$f\left(\int g\right) \leq \int f \circ g.$$
\end{theorem}
\begin{theorem}[Holder's inequality]
    \index{Holder's inequality}
    Let
    $$\frac{1}{p} + \frac{1}{q} = 1.$$
    Then $||fg||_{L^1} \leq ||f||_{L^p} ||g||_{L^q}$.
\end{theorem}
\begin{proof}
    The mapping $x \mapsto x^p$ is convex so if $f, g \geq 0$,
\begin{align*}
    \int fg
        &= \left(\int g^q\right) \int fg^{1-q} \frac{g^q}{\int g^q}
        \leq \left(\int g^q\right) \left(\int f^p g^{p(1-q)}\frac{g^q}{\int g^q}\right)^{1/p}\\
        &= \left(\int g^q\right) \left(\left(\int g^q\right) \left(\int f^p\right)\right)^{1/p}
        \leq \left(\int f^p\right)^{1/p} \left(\int g^q\right)^{1/q}.
\end{align*}
\end{proof}
    Notice that Holder's inequality implies that $L^2$ is a Hilbert space with inner product
    $$\langle f, g\rangle = \int fg.$$
\begin{theorem}[Minkowski's inequality]
    \index{Minkowski's inequality}
    Let
    $$\frac{1}{p} + \frac{1}{q} = 1.$$
    Then
    $$||f + g||_{L^p} \leq ||f||_{L^p} + ||g||_{L^p}.$$
\end{theorem}
\begin{proof}
    By Holder's inequality,
    \begin{align*}
        \int |f+g|^p
            &= \int |f+g||f+g|^{p-1}
            \leq \int (|f| + |g|) |f+g|^{p-1}
            \\&\leq \left(\left(\int |f|^p \right)^{1/p} + \left(\int |g|^p\right)^{1/p}\right)\left(\int |f+g|^{(p-1)\left(\frac{p}{p-1}\right)} \right)^{1-\frac{1}{p}}\\
            &= (||f||_{L^p} + ||g||_{L^p}) \frac{||f+g||_{L^p}^p}{||f+g||_{L^p}}.
    \end{align*}
\end{proof}
    Now we discuss change of variables.
\begin{definition}
    Let $\nu$ be a measure. Then
\begin{enumerate}
    \item $\nu$ is \dfn{absolutely continuous} with respect to $\mu$ if for every measurable set $A$, $\mu(A) = 0$ implies $\nu(A)$.
    \item $\nu$ is \dfn{singular} with respect to $\mu$ if there are disjoint measurable sets $A, B$ such that $X = A \cap B$, $\nu(A) = 0$ and $\mu(A) = 0$.
    \item If there is a measurable function $f$ such that for every measurable set $A$,
    $$\nu(A) = \int_A f ~d\mu,$$
    then $f$ is the \dfn{Radon-Nikodym derivative} of $\nu$, written
    $$f = \frac{d\nu}{d\mu}.$$
\end{enumerate} 
\end{definition}
\begin{theorem}[Radon-Nikodym]
    \index{Radon-Nikodym theorem}
    Let $\mu$ be $\sigma$-finite and $\nu$ be a positive measure. Then there is a unique decomposition $\nu = \nu_a + \nu_s$ such that $\nu_a$ is absolutely continuous and $\nu_s$ is singular (with respect to $\mu$). Moreover, $\nu_a$ has a Radon-Nikodym derivative.
\end{theorem}
    In particular, if $\nu$ was already absolutely continuous, then $\nu_s = 0$ and $\nu$ has a Radon-Nikodym derivative.
\begin{proof}
    Uniqueness is obvious. First assume $\mu(X) < \infty$. Then $\mu + \nu$ is finite, so $L^\infty(\mu + \nu) \subseteq L^1(\mu + \nu)$. So by the Cauchy-Schwarz inequality, if $f$ is an ISF,
    $$\left|\int f ~d\nu\right| \leq ||f||_{L^1(\nu)} \leq ||f||_{L^1(\mu+\nu)} \preceq ||f||_{L^2(\mu)}.$$
    So $\int \cdot ~d\nu$ is $L^2$-continuous on ISF, hence on $L^2(\mu + \nu)$. So by the Riesz representation theorem, there is a nonnegative $h \in L^1(\mu + \nu)$ such that
    $$\int f ~d\nu = \int \int fh ~d(\mu + \nu)$$
    for any $f \in L^2$. In particular, if $A$ is measurable,
    $$\int_A h ~d(\mu + \nu) = \nu(A) \leq (\mu + \nu)(A).$$
    Without loss of generality we assume $h \leq 1$. If $g \in L^\infty(\nu)$,
    $$\int g ~d\nu = \int gh ~d\mu + \int gh ~d\nu.$$
    So if $Y$ is the set of all $y$ such that $0 \leq h(y) < 1$, it follows that $\mu(Y) = \mu(X)$. By induction,
    $$\int g ~d\nu = \int g(h + \dots + h^n) ~d\mu + \int gh^n ~d\nu.$$
    Since $h \leq 1$, the dominated convergence theorem implies
    $$\int gh^n ~d\nu \to \int_{X \setminus Y} g ~d\nu$$
    and if
    $$f = \frac{h\chi_Y}{1-h}$$
    we have
    $$\int g ~d\nu = \int_Y gf ~d\mu + \int_{X \setminus Y} g ~d\nu$$
    and take $\nu_s(A) = \nu(A \cap (X \setminus Y))$. Then we take
    $$\nu_a(A) = \int_A f ~d\mu$$
    so $f$ is the Radon-Nikodym derivative of $\nu_a$, $\nu_a + \nu_s = \nu$ by taking $g = \chi_A$.
    
    To extend to the $\sigma$-finite case, break up $X$ into countably many finite measure spaces and sum over them.
\end{proof}
    Next we discuss iterated integrals. Given measure spaces $(X, S, \mu)$ and $(Y, T, \nu)$, we need a $\sigma$-algebra on $X \times Y$ and a measure defined on that $\sigma$-algebra. To do this, we use the Caratheodory construction.
\begin{definition}
    If $E \in S$ and $F \in T$, then $E \times F$ is a \dfn{measurable rectangle}. Let $S \otimes T$ denote the smallest $\sigma$-algebra containing the measurable rectangles, and on for each measurable rectangle, define a countably additive function by
    $$\mu \otimes \nu(E \times F) = \mu(E) \nu(F).$$
\end{definition}
    By the monotone convergence theorem $d\nu$, $\mu \otimes \nu$ is countably additive. So the Caratheodory construction gives rise to a measure $\mu \otimes \nu$ whose measurable sets include $S \otimes T$ (in fact, is the completion of $S \otimes T$).
\begin{definition}
    The measure space $(X \times Y, S \otimes T, \mu \otimes \nu)$ is the \dfn{product measure space} of $(X, S, \mu)$ and $(Y, T, \nu)$.
\end{definition}
    Straight from the definitions, we know that for every measurable rectangle $E \times F$,
    $$\int \chi_{E \times F} ~d(\mu \otimes \nu) = \iint \chi_{E \times F} ~d\mu ~d\nu = \iint \chi_{E \times F} ~d\nu ~d\mu.$$
    
    For a function $f$ defined on $X \times Y$ we define $f^y(x) = f(x, y)$ and $f_x(y) = f(x, y)$. For a set $G \subseteq X \times Y$, we define $G^y = \{x \in X: (x, y) \in G\}$ and $G_x = \{y \in Y: (x, y) \in G\}$. 
\begin{theorem}[Fubini]
    \index{Fubini's theorem}
    Let $f \in L^1(\mu \otimes \nu)$ and assume $\mu \otimes \nu$ is $\sigma$-finite. Then for almost every $y$, $f^y \in L^1(\mu)$. Moreover, the function
    $$F(y) = \int f^y ~d\mu$$
    has $F \in L^1(\nu)$, and
    $$\int f ~d(\mu \otimes \nu) = \iint f^y ~d\mu ~d\nu = \iint f_x ~d\nu ~d\mu.$$
\end{theorem}
    The assumption of $\sigma$-finiteness is not optional here, and Fubini's theorem can fail for large cardinality measure spaces.
\begin{definition}
    Let $M$ be a family of subsets of $X$ such that for every countable chain of $A_n$ in $M$ and $\bigcup_n A_n = A$ or $\bigcap_n A_n = A$, $A \in M$. Then we say $M$ is a \dfn{monotone class}.
\end{definition}
    If $R$ is a ring of sets, then the smallest monotone class $M$ containing $R$ is also a ring, and it is not hard to see that $M$ is the smallest $\sigma$-algebra containing $R$.
\begin{lemma}
    Let $G \in S \otimes T$. Then:
\begin{enumerate}
    \item $G_x \in T$ and $G^y \in S$.
    \item $x \mapsto \nu(G_x)$ and $y \mapsto \mu(G^y)$ are measurable.
    \item One has
    $$\mu \otimes \nu(G) = \int (x \mapsto \nu(G_x)) ~d\mu(x) = \int (y \mapsto \mu(G^y)) ~d\nu(y) = \iint \chi_G ~d\mu ~d\nu.$$
\end{enumerate}
\end{lemma}
\begin{proof}
    This is obvious if $G$ is a measurable rectangle. We shall show that the algebra of sets on which this claim holds is a monotone class, hence a $\sigma$-algebra. Clearly if $\bigcup_n G_n = G$ then $G$ has the property. Given $x \in X$, $\bigcup_n (G_n)_x = G_x$, so $G_x \in T$. Therefore the chain of functions $x \mapsto \nu(G_n)_x$ converges to $x \mapsto \nu(G_x)$ which is therefore measurable. So by the monotone convergence theorem,
    $$\lim_n \mu \otimes \nu(G_n) = \lim_n \int (x \mapsto \nu((G_n)_x) ~d\mu(x) = \int (x \mapsto \nu(G_x) ~d\mu(x) = \mu \otimes \nu(G).$$
    So this algebra is closed under ascending chains. The proof in the other direction is similar but you have to start by assuming that $\mu \otimes \nu(G_1) < \infty$.
\end{proof}
\begin{lemma}
    Let $f \geq 0$ be $S \otimes T$-measurable. Then
    $$\int f ~d\mu \otimes \nu = \iint f ~d\mu ~d\nu.$$
\end{lemma}
\begin{proof}
    Let $\{f_n\}$ be a chain of ISFs. This claim is obvious for ISF, so the monotone convergence theorem on the $f_n^y$ for each $y \in Y$.
\end{proof}
\begin{theorem}[Tonelli]
    \index{Tonelli's theorem}
    If $f$ is $S \otimes T$-measurable, $g(x) = ||f(x)||$, $g^y \in L^1(\mu)$, and $(y \mapsto \int g^y ~d\mu) \in L^1(\nu)$, then $f \in L^1(\mu \otimes \nu)$. 
\end{theorem}
\begin{proof}
    Clear by the lemmata.
\end{proof}
\begin{proof}[Proof of Fubini's theorem]
    Let $g(x, y) = ||f(x, y)||$. Then if $\{f_n\}$ is a sequence of ISF converging to $f$, $g$ dominates the $f_n$. Apply the dominated convergence theorem twice, once for each integral.
\end{proof}

\section{Duality}
    Fix a normed space $V$. We consider properties of $V^*$. Since $\CC$ is complete, $V^*$ is a Banach space; in particular, $V^{**}$ is a Banach space. So we can always embed $V$ in a Banach space by the mapping
\begin{align*}
    V &\to V^{**}\\
    v &\mapsto (\varphi \mapsto \varphi(v)).
\end{align*}
    However, $V^{**}$ is rarely the completion of $V$ if $V$ is infinite-dimensional. Moreover, the topology of $V^*$ is a bit awkward to work with, since a convergence in operator norm is much stronger than convergence pointwise.
\begin{definition}
    The \dfn{weakstar topology} of $V^*$ is the initial topology such that every evaluation $\varphi \mapsto \varphi(v)$ is continuous.
\end{definition}
    In other words, the weakstar topology is the topology of pointwise convergence.
\begin{theorem}[Banach-Alaoglu]
    \index{Banach-Alaoglu theorem}
    Let $B$ be the closed unit ball of $V^*$. Then $B$ is weakstar compact.
\end{theorem}
    Like the Hanh-Banach and Krein-Milman theorems, the proof of Banach-Alaoglu uses the axiom of choice. However, the Banach-Alaoglu theorem is not really nonconstructive, since if $V$ is separable, we can use a diagonalization argument to prove it instead. Banach-Alaoglu generalizes to locally convex spaces.
\begin{proof}
    Let
    $$D_v = \{z \in \CC: |z| \leq ||v||\}$$
    and $D = \prod_{v \in V} D_v$. By Tychonoff's theorem, $D$ is compact. Moreover, there is a natural embedding
\begin{align*}
    \iota: V^* &\to D\\
    f &\mapsto \{f(v)\}_{v \in V}.
\end{align*}
    Since the product topology is the topology of pointwise convergence, $\iota$ is a homeomorphism $V^* \to \iota(V^*)$. So we just need to show that $\iota(V^*)$ is closed. So let $\{\{f_\alpha(v)\}_{v \in V}\}_{\alpha \in A}$ be a net in $D$, which converges to a $\{\varphi_v\}_{v \in V}$. Then $f(v) = \varphi_v$ is a linear functional and $f_\alpha \to f$ pointwise so $\{\varphi_v\}_{v \in V} \in \iota(V^*)$.
\end{proof}
    Now we compute the duals of the main examples of Banach spaces we have presented so far.
\begin{theorem}
    Let $p, q \in [1, \infty]$ and assume $\mu$ is $\sigma$-finite.
    $$\frac{1}{p} + \frac{1}{q} = 1.$$
    Then $(L^p(\mu))^* = L^q(\mu)$.
\end{theorem}
    Actually, this theorem is true without the $\sigma$-finiteness; however, it becomes much more difficult.
\begin{proof}
    For $g \in L^q$, one has $||g||_{p^*} \leq ||g||_q$ by Holder's inequality and by taking larger and larger measurable sets $E$ and considering $\int_E g$, we check $||g||_{p^*} \geq ||g||_q$. So we just need to show that the map $L^q \to L^{p^*}$ is surjective.
    
    If $h \in L^p$ and $X$ splits into finite measure spaces $X_k$ we put $h_k = \chi_{X_k}h$, so $\sum_k h_k = h$ in $L^p$ by the dominated convergence theorem. If $\varphi \in L^{p^*}$ then $\varphi(\sum_k h_k) = \sum_k \varphi(h_k)$ so we might as well assume $X = X_1$, viz. $\mu(X) < \infty$. Then $L^\infty \subseteq L^p$, so $\varphi \in (L^\infty)^*$. We can define an absolutely continuous measure $\nu$ by $\nu(A) = \varphi(\chi_A)$, and by the Radon-Nikodym theorem, there is a Radon-Nikodym derivative $f$ of $\nu$.
    
    Let $Y_n = \{x \in X: |f(x)| \leq n\}$ and let $g = f/|f|^{q-2}$, where $g(x) = 0$ if $f(x) = 0$, and $g_n = \chi_{Y_n}g_n$. Then $|g|^p = |f|^q$ and
    $$\int_{Y_n} |f|^q = \int g_nf = \varphi(g_n) \preceq ||g_n||_p \preceq ||f_n||_{L^p(Y_n)}.$$
    So $||f||_{L^q(Y_n)} < \infty$, and by the monotone convergence theorem, $f \in L^q$.
\end{proof}

\section{Vector lattices}
    We now consider the natural order structure of a space.
\begin{definition}
    A \dfn{vector lattice} is a vector space $V$ equipped with a partial order $\leq$ which is translation-invariant such that $(V, \leq)$ is a lattice, and such that for each $c \geq 0$ and $x \leq y$, $cx \leq cy$.
\end{definition}
    Recall that a lattice is just a poset which is closed under finite joins $\vee$ (suprema) and meets $\wedge$ (infima). Actually, we just need to check that $V$ is a semilattice, since multiplication by $-1$ implies that a semilattice is already a lattice.
    
    If $V$ is a vector lattice and $v \in V$, we define $f_\pm = \pm f \vee 0$. Then $f = f_+ - f_-$ and we define the absolute value (or valuation) $|f| = f_+ + f_-$.
\begin{definition}
    A \dfn{Banach lattice} is a vector lattice $V$ which is a Banach lattice, such that $|x| \leq |y|$ whenever $||x|| \leq ||y||$.
\end{definition}
\begin{example}
    A function space mapping into $\RR$ is usually a Banach lattice with the natural ordering, $f \leq g$ iff for every $x$, $f(x) \leq g(x)$. For example, $C(X)$ is a lattice. Spaces of operators are Banach lattices as well, whose positive elements are precisely the positive operators; as are spaces of signed measures, where the positive measures are the positive elements.
\end{example}
\begin{theorem}
    Let $V$ be a Banach lattice. There is a natural ordering on $V^*$, such that $f \in V^*$ is positive iff for each positive $v \in V$, $f(v) \geq 0$, and such that $f \leq g$ iff for every positive $v \in V$, $f(v) \leq g(v)$.
\end{theorem}
\begin{proof}
    Take the definition of positive functionals as in the statement of the theorem. If $f$ and $-f$ are both positive, each $v = v_+ - v_-$ has $f(v_+) \geq 0$ but $f(v_-) \leq 0$. So $f(v) = 0$. Since $v$ was arbitrary, $f = 0$.
    
    Given $f \in V^*$, define
    $$f^+(v) = \sup_{0 \leq x \leq v} f(x)$$
    for $v \geq 0$. Then $f^+ \geq f$, and $f^+$ is finite because if $x \leq v$, $|f(x)| \leq ||f|| ||v||$. Moreover, if $v, w \geq 0$, it is easy to check $f^+(v+w) = f^+(v) + f^+(w)$. So $f^+$ is positive-linear, so extends to all of $V$ and so $f^+ \in V^*$.
    
    Clearly $f^+ - f \geq 0$. We need to show this is optimal, i.e. $f^+ = f \vee 0$. Assume $g \geq f \vee 0$. Then for $0 \leq x \leq v$, $f(x) \leq g(x) \leq g(v)$, so taking the $\sup$ over $x$ we have $f^+(v) \leq g(v)$. The other direction is similar. So $f^+ = f \vee 0$.
\end{proof}
    Fix a compact Hausdorff space $X$, $|X| \geq 2$ (so in particular, every set which separates points is nonempty). Let us now study the behavior of sublattices of $C(X) = C(X \to \RR)$.
\begin{theorem}[Dini]
    \index{Dini's theorem}
    Let $L$ be a sublattice of $C(X)$, and define $g(x) = \inf_{f \in L} f(x)$. For each $\varepsilon > 0$, there exists a $h \in L$ such that $g \leq h \leq g + \varepsilon$.
\end{theorem}
\begin{proof}
    For each $f \in L$ let $U_f = \{x \in X: f(x) - g(x) \leq \varepsilon\}$. Then the $U_f$ are an open cover of $X$, which has a finite subcover by functions $f_1, \dots, f_k$. Take $h = \bigwedge_{j \leq k} f_j$.
\end{proof}
    When can a lattice be used to approximate any function in $C(X)$? A necessary condition is that the lattice strongly separates points. This turns out to be sufficient as well.
\begin{definition}
    A set $A \subseteq C(X)$ \dfn{separates points} if for each $x, y \in X$, there is an $f \in A$ such that $f(x) \neq f(y)$. If, in addition, the constant functions $\RR \subseteq A$, then $A$ \dfn{strongly separates points}.
\end{definition}
\begin{theorem}[Stone-Weierstrass]
    \index{Stone-Weierstrass theorem}
    If $L \subseteq C(X)$ is a sub-vector lattice or a subalgebra which strongly separates points, then $L$ is dense in $C(X)$.
\end{theorem}
    The lattice case is also called the \dfn{Kakutani-Krein theorem}.
\begin{lemma}
    \label{sw lem 1}
    Let $L$ be a sublattice of $C(X)$ which separates points and is closed under multiplication and addition by elements of $\RR$. Then if $B \subseteq X$ is compact, $p \in X \setminus B$, and $a, b \in \RR$, there is a $g \in L$ such that $g \geq a$, $g(p) = a$ and $g > b$ on $B$.
\end{lemma}
\begin{proof}
    For each $x \in B$ there exists $g_x \in L$ such that $g_x(p) = a$ and $g_x(x) = b+1$. Let $U_x = \{y\in X: g_x(y) > b\}$. Since $x \in U_x$, the $U_x$ are an open cover of $B$ with finite subcover $U_{x_1}, \dots, U_{x_k}$. Take $g = a \vee \bigvee_{j \leq k} g_{x_k}$.
\end{proof}
\begin{lemma}
    \label{sw lem 2}
    Assume that $L$ is a closed unital subalgebra of $C(X)$. Then $L$ is a lattice.
\end{lemma}
\begin{proof}
    Choose $\varepsilon > 0$ and apply the classical Weierstrass theorem to $[-1, 1]$ to find a polynomial $P_\varepsilon$ which approximates $|\cdot|$ in $L^\infty$-norm by $\varepsilon$. Then for each $f \in L$, we can approximate $|f|$ by $P_\varepsilon \circ f$. Since $L$ is unital, $P_\varepsilon \circ f \in L$. So $|f| \in L$, since $L$ is closed. The lattice operations $\vee$ and $\wedge$ can be expressed in terms of algebra operations $+$ and $\cdot$, and $|\cdot|$, so $L$ is closed under lattice operations.
\end{proof}
\begin{proof}[Proof of Stone-Weierstrass]
    First consider the case that $L$ is a lattice. Given $f \in C(X)$, define $L_f = \{g \in L: g \geq f\}$. Then $L_f$ is a sublattice of $L$. Given $x \in X$, $\delta > 0$, the set $B = \{y \in X: f(y) \geq f(x) + \delta\}$ is closed. Since $X$ is compact, there is an $M > 0$ such that $f < M$. Apply Lemma \ref{sw lem 1} with $a = f(x) + \delta$ and $b = M$, so there is a $g \in L$ such that $g \geq f(x) + \delta$, $g(x) = f(x) + \delta$ and $g > M$ on $B$. So $f \leq g \leq g + \delta$, so $f = \bigwedge L_f$. Therefore by Dini's theorem, there is an $h \in L$ with the desired properties.
    
    For the algebra case, since $L$ strongly separates points, $L$ is unital. Therefore $\overline L$ is a closed unital algebra, $\overline L$ is a closed lattice whose closure is $C(X)$, by Lemma \ref{sw lem 2} and the above case. So $\overline L = C(X)$.
\end{proof}
This even extends to decaying functions on locally compact Hausdorff spaces, by taking the one-point compactification.

\section{Positive Radon measures}
The usual construction of measures by ISF is somewhat unnatural when we have a nice topology, since then we can define integration in terms of continuous functions. Clearly ``nice" in this context implies locally compact Hausdorff; these conditions are also sufficient (though $\sigma$-compactness also helps). Throughout this section, we fix a locally compact Hausdorff space $X$ and consider the space $C_c(X)$ of compactly supported continuous functions $X \to \CC$.

We have not given a topology on $C_c(X)$, so a functional is just an element of $\Hom(C_c(X), \CC)$ for now.
\begin{definition}
    A \dfn{positive Radon measure} on $X$ is a functional on $C_c(X)$.
\end{definition}
Let us prove that a positive Radon measure is actually a measure in a natural way. First, we put a topology on $C_c(X)$. We start by putting the $L^\infty$-topology on $C_c(U)$ for each open set $U \subseteq X$ with compact closure.
\begin{definition}
    The \dfn{inductive limit topology} of $C_c(X)$ is the final (i.e. strongest) topology on $C_c(X)$ such that $\varphi: C_c(X) \to Y$ is continuous provided that for each open set $U \subseteq X$ with compact closure, $\varphi|_{C_c(U)}$ is continuous.
\end{definition}
In other words, the inductive limit topology is the final topology which makes the natural maps $C_c(U) \to C_c(X)$ continuous. A positive Radon measure is continuous for the inductive limit topology, as can be seen by taking an $h \in C_c(X)$ which is $1$ on $U$, so $||\varphi||_{C_c(U)} \leq \varphi(h)$.

Now we need some general facts about locally compact Hausdorff spaces.
\begin{definition}
    A (continuous) \dfn{partition of unity} on a subordinate to an open cover $U_1, \dots, U_n$ is a family of (continuous) functions $f_1, \dots, f_n$ which are compactly supported in $U_i$, such that $\sum_i f_i = 1$.
\end{definition}
\begin{theorem}
    \label{partitions of unity}
    For any finite open cover $\mathcal U$ of a compact set, there is a partition of unity subordinate to $\mathcal U$.
\end{theorem}
\begin{lemma}
    Let $K \subseteq X$ be compact. If $U_1, \dots, U_n$ is an open cover of $K$ there are compact sets $K_1, \dots, K_n$, $K_i \subseteq U_i$, which cover $K$.
\end{lemma}
\begin{proof}
    For each $x \in K$ choose a $j$ such that $U_j \ni x$ and an open set $V_x \ni x$ such that
    $$V_x \subset \overline V_x \subset U_j.$$
    Then the $V_x$ are an open cover of $K$ so they reduce to a finite subcover $V_{x_1}, \dots, V_{x_p}$. For each $k \leq p$ choose a $j_k \leq n$ such that $V_{x_k} \subseteq U_{j_k}$ and let $W_j = \bigcup_{j_k=j} V_k \subseteq U_j$. Then $\overline W_j \subseteq U_j$ and the $\overline W_j$ contain the $V_x$s, so are a compact cover of $K$.
\end{proof}
\begin{proof}[Proof of Theorem \ref{partitions of unity}]
    Fix a compact set $K$. By the lemma, we can choose $D_j \subseteq U_j$ a compact cover of $K$ and $g_j$ supported in $U_j$ with $g_j \geq 1$ on $D_j$, and $h = \sum_j g_j$. Then $h \geq 1$ on $C$ and put $k = h \vee 1 \geq 1$. So $1/k$ exists and we can put $f_j = g_j/k$, to force $\sum_j f_j = 1$.
\end{proof}

\begin{definition}
    A \dfn{content} is a function defined on sets into $[0, \infty]$ which is monotone, countably subadditive, and finitely additive, and which carries compact sets to $[0, \infty)$. A content $\mu$ is said to be \dfn{inner regular} if for every open set $U$,
    $$\mu(U) = \sup_{\substack{\overline V \subseteq U\\V \text{open}\\\overline V \text{compact}}} \mu(V).$$
\end{definition}
Fix a positive Radon measure $\varphi$, and define an inner-regular content $\mu$ on the topology $\mathcal T$ on $X$ by
\begin{align*}
    \mu: \mathcal T &\to [0, \infty]\\
    U &\mapsto \sup_{\substack{f \in C_c(U)\\0 \leq f \leq 1}} \varphi(f).
\end{align*}
Given a content $\nu$, we can extend $\nu$ to an outer measure $\nu^*$ on the power set $\pset$ by
$$\nu^*(A) = \inf_{\substack{U \subseteq A\\U \in \mathcal T}} \nu(U).$$
In turn, then, $\nu^*$ restricts to a measure, also called $\nu$, on its measurable $\sigma$-algebra, by the Caratheodory construction. So, in particular, $\mu$ gives rise to a measure.

\begin{definition}
    Let $\nu$ be a Borel measure. We say that $\nu$ is \dfn{outer regular} if for every Borel set $E$,
    $$\mu(E) = \inf_{\substack{E \subseteq U\\U \in \mathcal T}} \mu(U)$$
    and \dfn{inner regular} if for every \emph{open} set $U$,
    $$\mu(U) = \sup_{\substack{\overline V \subseteq U\\V \text{open}\\\overline V \text{compact}}} \mu(V).$$
\end{definition}
    We state the main result.
\begin{theorem}[Riesz-Markov representation theorem]
    \index{Riesz-Markov representation theorem}
    $\mu$ is a positive Borel measure which is both inner and outer regular, and $\varphi$ is the unique functional such that for every $f \in C_c(X)$,
    $$\varphi(f) = \int f~d\mu.$$
\end{theorem}
    The proof of the Riesz-Markov representation theorem is quite long, so we only sketch it.
\begin{proof}[Proof sketch]
    Let $\nu^*$ be an outer measure which is finitely additive and inner regular on the topology of $X$, and let $U$ be open. Then Caratheodory's criterion holds for $U$ and $\nu^*$ on open sets. Approximating any subset of $X$ by an open set, Caratheodory's criterion holds on the power set for $U$ and $\nu^*$. So $U$ is $\nu^*$-measurable, and $\nu^*$ restricts to a Borel measure $\nu$. In particular, $\mu$ is a Borel measure.
    
    If $f \in C_c(X)$, and $f \geq 1$ on an open set $U$, $\varphi(f) \geq \mu^*(U)$. Approximating any set $A$ by an open set, we see that $\varphi(f) \geq \mu^*(A)$ whenever $f \geq 1$ on $A$. On the other hand, if $f \leq 1$ on $A$, a monotone convergence argument shows that $\mu^*(A) \geq \varphi(f)$. Since $C_c(X)$ is a Banach lattice, we can replace $f$ with $f^+$ and by decomposing $X$ into a chain of sets $X_n \{x \in X: f(x) \geq n\varepsilon\}$ and summing the $f|_{X_n} \setminus f|_{X_{n-1}}$ we prove
    $$\varphi(f) = \int f~d\mu.$$
    
    Since $\mu$ was inner and outer regular as a content, approximation by open sets implies regularity on Borel sets. Moreover, if $\psi$ is a positive Radon measure, define a content $\nu$ by
    $$\nu(U) = \sup_{\substack{f \leq \chi_U\\f \in C_c(U)}} \int f ~d\nu.$$
    If $\nu = \mu$ it follows that $\psi = \varphi$.
\end{proof}
    Notice that on the other hand, a complex measure $\nu$ on $C_c(X)$ gives rise to a functional $\psi$ by
    $$\psi(f) = \int f ~d\nu.$$
    The positive part of $\psi$ is in fact the positive part of $\nu$.
    
    Now if $S$ is a locally compact semigroup, we let $M(S)$ be the set of all finite Radon measures on $S$. This is a convolution algebra, with
    $$\mu*\nu(f) = \iint_S f(xy) ~d\mu(x) ~d\nu(y).$$

\section{Baire categories}
    Now we look at a topological analogue of ``measure zero."
\begin{definition}
    Let $X$ be a topological space. A set $S \subseteq X$ is \dfn{nowhere dense} if for every open set $U$, $S \cap U$ is not dense in $U$. A set $T \subseteq X$ is \dfn{meager} or \dfn{of the first category} if $T$ is the countable union of nowhere dense sets. A set $W \subseteq X$ is \dfn{of the second category} if it is not of the first category, or \dfn{comeager} if it is the complement of a meager set.
\end{definition}
\begin{lemma}
    For a topological space, the following are equivalent:
\begin{enumerate}
    \item Every countable union of closed sets with empty interior has empty interior. 
    \item Every countable intersection of open dense sets is dense. 
    \item Every nonempty open set is of the second category.
\end{enumerate}
\end{lemma}
    This is basically obvious.
\begin{definition}
    A topological space is a \dfn{Baire space} if one (and all) of the above criteria hold.
\end{definition}
\begin{theorem}[Baire category theorem]
    \index{Baire category theorem}
    Every completely pseudometrizable or locally compact Hausdorff space is Baire.
\end{theorem}
    For example, a Banach space is Baire.
\begin{proof}
    Let $U_n$ be a sequence of open dense sets, and let $W$ be open, in the space $X$. Then $W \cap U_1$ is nonempty and open, say $x_1 \in W \cap U_1$. If $X$ is pseudometrizable, then there is a $\varepsilon_1 \in (0, 1)$ such that the open ball $V_1 = B(x_1, \varepsilon_1)$ satisfies $K_1 = \overline B(x_1, \varepsilon_1) \subseteq W \cap U_1$; if $X$ is locally compact Hausdorff, then there is a compact set with nonempty interior $V_1 \subseteq K_1 \subseteq W \cap U_1$. Iterate using the denseness of the $U_n$ and the axiom of choice to construct a sequence $x_n \in V_n \subseteq K_n \subseteq V_{n-1} \cap U_n$. If $X$ is pseudometrizable, then we can always choose $\varepsilon_n < 1/n$, so the $x_n$ are a Cauchy sequence. Otherwise, $\bigcap_n K_n$ is nonempty anyways by the finite intersection property. Either way, we can find an $x \in \bigcap_n K_n \subseteq \bigcap_n U_n$ such that $x \in W$. So $\bigcap_n U_n$ is dense.
\end{proof}
Actually, we didn't use the full axiom of choice. The Baire category theorem is equivalent over ZF to the following axiom.
\begin{axiom}[Axiom of dependent choice]
    \index{axiom of dependent choice}
    Let $X$ be a nonempty set and $R$ be a binary relation. If, for every $a \in X$, there is a $b \in X$ such that $aRx$, then there is a sequence of $x_n$ such that $x_nRx_{n+1}$.
\end{axiom}
The axiom of dependent choice is not strong enough to prove the existence of nonmeasurable sets, for example. Moreover, if $X$ is assumed to be separable, then the Baire category theorem just follows from induction, without even dependent choice.

\begin{theorem}[uniform boundedness principle]
    \index{uniform boundedness principle}
    Let $X$ be a Banach space and $Y$ a normed space, and $F$ be a set of linear mappings $X \to Y$. If for every $x \in X$,
    $$\sup_{T \in F} ||Tx|| < \infty,$$
    then
    $$\sup_{\substack{T \in F\\||x|| = 1}} ||Tx|| = \sup_{T \in F} ||T||.$$
\end{theorem}
The uniform boundedness principle is also called the Banach-Steinhaus theorem.\index{Banach-Steinhaus theorem} The proof is a standard application of the Baire category theorem: construct a chain of closed sets whose union is the entire space, which implies that one is not meager.
\begin{proof}
    Let
    $$X_n = \{x \in X: \sup_{T \in F} ||Tx|| \leq n\}.$$
    Then the $X_n$ are a closed chain whose union is $X$. So by the Baire category theorem, there is an $x \in X$, $m > 0$, and $\varepsilon > 0$ such that $B(x, \varepsilon) \subset X_m$. So if $||u|| < 1$ and $T \in F$,
\begin{align*}
    ||Tu|| &= \varepsilon^{-1} ||T(x + \varepsilon u) - Tx||
        \leq \varepsilon^{-1} ||T(x + \varepsilon u)|| + \varepsilon^{-1} ||Tx||
        \leq 2\frac{m}{\varepsilon}.
\end{align*}
    Taking the $\sup$ over $u$ of both sides,
    $$\sup_{T \in F} ||T|| \leq 2\frac{m}{\varepsilon} < \infty.$$
\end{proof}
\begin{theorem}[open mapping theorem]
    \index{open mapping theorem}
    If $A: X \to Y$ is a surjective continuous linear mapping between Banach spaces, then $A$ is open.
\end{theorem}
The open mapping theorem is also called the Banach-Schauder theorem.\index{Banach-Schauder theorem}
\begin{proof}
    We must show that if $U$ is the open unit ball of $X$, then $A(U)$ is open. Since $X = \bigcup_k kU$, $Y = \bigcup_k A(kU)$. By the Baire category theorem, there is a $k > 0$, $\varepsilon > 0$, and $y \in Y$ such that $B(y, \varepsilon) \subseteq \overline{A(kU)}$. If $V$ is the unit ball of $Y$, $v \in V$, $y+\varepsilon v \in \overline{A(kU)}$ so
    $$\varepsilon v \in \overline{A(kU)} + \overline{A(kU)} \subseteq \overline{A(2kU)}.$$
    So if $L = 2k/\varepsilon$, $V \subseteq \overline{A(LU)}$. 
    
    In other words, for every $y \in Y$ and $\varepsilon > 0$ there is an $x \in X$ such that $||x|| \leq L||y||$ and $||y-Ax|| < \varepsilon$. In particular, given $y \in V$ we can choose $x_1$ such that $||x_1|| \leq L$ and $||x-Ax_1|| < 1/2$. Choose $||x_{n+1}|| \leq L2^{-n}$ such that
    $$||y - A(x_1 + \dots + x_n) - Ax_{n+1}|| < 2^{-n-1},$$
    by induction and the axiom of (dependent) choice. The sequence of partial sums is therefore Cauchy, so we can put $x = \sum_n x_n$, and $Ax = y$ by the above estimates. Also
    $$||x|| = \lim_{n \to \infty} \left|\left| \sum_{k\leq n} x_k\right|\right| \leq \sum_{n=1}^\infty x_n < 2L.$$
    So $y \in A(2LU)$. Therefore $V \subseteq A(2LU)$ which was to be shown.
\end{proof}
\begin{theorem}[closed graph theorem]
    Let $A: X \to Y$ be a linear mapping between Banach spaces. If the graph of $A$ is closed in $X \oplus Y$, then $A$ is continuous.
\end{theorem}
    Notice that while there isn't a canonical norm for $X \oplus Y$, any $\ell^p$ norm will do; since $X \oplus Y$ is a finite direct sum, all $\ell^p$ norms are equivalent. In particular, $X \oplus Y$ is a Banach space.
\begin{proof}
    Let $\Gamma$ be the graph of $A$, which is equipped with a natural (linear, bijective) projection $\pi_X: \Gamma \to X$. Since
    $$||P(x, Ax)|| = ||x|| \leq ||(x, Ax)||,$$
    $||P|| \leq 1 < \infty$. So by the open mapping theorem,
    $$||Tx|| \preceq ||P^{-1}x|| + ||x|| \preceq ||x||.$$
\end{proof}

\chapter{Preliminaries on Banach algebras}
\begin{definition}
A \dfn{Banach algebra} is a Banach space equipped with a bilinear, associative multiplication such that
$$||xy|| \leq ||x|| ||y||.$$
If $*$ is a linear involution on $\mathcal A$ such that $(xy)^* = y^*x^*$ and $1^*= 1$ if $\mathcal A$ is unital. then we say that $\mathcal A$ is a \emph{$*$-algebra}.
\end{definition}

\begin{definition}
\index{$C^*$-algebra}
Let $\mathcal A$ be a $*$-algebra. If one has the \emph{$C^*$-identity}
$$||x^*x|| = ||x||^2,$$
then we say that $\mathcal A$ is a \emph{$C^*$-algebra}.
\end{definition}

For example, if $\mathcal H$ is a Hilbert space, then $\mathcal B(\mathcal H)$ is a $C^*$-algebra. Later we will learn that sub-$*$-algebras of $\mathcal B(\mathcal H)$ are the only examples of $C^*$-algebras.

Often the norm topology is too strong, so we introduce a new topology which is weaker on $\BB(\HH)$.
\begin{definition}
    The \dfn{strong operator topology} is the locally convex topology on $\BB(\HH)$ defined by the seminorms
    $$P_\xi(T) = ||T\xi||.$$
\end{definition}
In other words, a sequence converges in the strong operator topology $T_n \to T$ iff for each $\xi \in \HH$, $||(T_n - T)\xi|| \to 0$. So the strong operator topology is the topology of pointwise convergence.
\begin{definition}
    A \dfn{von Neumann algebra} $\mathcal A$ is a sub-$*$-algebra of $\BB(\HH)$ which is closed in the strong operator topology.
\end{definition}


\section{The spectrum}
Fix a Banach algebra $A$.
\begin{definition}
    Let $a \in A$. The \dfn{spectrum} $\sigma(a)$ is the set of $z \in \CC$ such that $\sigma(a) - z$ is not invertible. The \dfn{resolvent} $\rho(a)$ is the complement of $\sigma(a)$.
\end{definition}

\begin{lemma}
    Let $a \in A$. If $||a|| < 1$ then $1 - a$ is invertible with inverse
    $$(1 - a)^{-1} = \sum_{n=0}^\infty a^n.$$
\end{lemma}
\begin{proof}
    The partial sums converge since $||a|| < 1$. Therefore
    $$(1 - a) \sum_{n=0}^\infty a^n = (1 - a) \lim_{n \to \infty} \sum_{k=0}^n a^k = \lim_{n \to \infty} \sum_{k=0}^n a^k - a^{k-1} = 1$$
    since the summands telescope.
\end{proof}
In particular, if $||1 - a|| < 1$ then $a$ is invertible. 
\begin{definition}
    The \dfn{general linear group} of $A$ is $\GL(A)$, the group of invertible elements of $A$.
\end{definition}
By the above lemma, there is a ball $B$ around $1$ contained in $\GL(A)$. By continuity of translation, we can carry $B$ to be centered at any point of $\GL(A)$. Therefore $\GL(A)$ is an open set.

\begin{proposition}
    The function $z \mapsto (z - a)^{-1}$ is holomorphic on $\rho(a) \cup \infty$.
\end{proposition}
    In this case, holomorphy is indicated by local existence of a convergent power series.
\begin{proof}
    We have
    $$(a - z)^{-1} = \sum_{n=0}^\infty (a - z_0)^{-n-1}(z-z_0)^n$$
    for each $z_0 \in \rho(a)$ and $z$ close enough to $z_0$ that the power series converges. To see that the function is still holomorphic at $\infty$, notice that
    $$(a - z^{-1})^{-1} = z(1 - az)^{-1}$$
    which vanishes as $z \to 0$. Replacing $z$ by $z^{-1}$, we see that the function is bounded close to infinity, and continuous, so holomorphic there.
\end{proof}

We now observe that the usual proofs of Cauchy's integral formula and its friends such as Cauchy's estimate and Liouville's theorem go through even in case of holomorphic functions $U \to A$, $U \subseteq \CC$ open. 

We now come to the famous Gelfand-Mazur theorem, which can be thought of as a ``restatement of the fundamental theorem of algebra" for our purposes. For the notation, recall that the map $z \mapsto z1$ is an embedding of $\CC$ in any Banach algebra. 
\begin{theorem}[Gelfand-Mazur]
    \index{Gelfand-Mazur theorem}
    If $A = \GL(A) \cup 0$, then $A = \CC$.
\end{theorem}
\begin{proof}
    Let $a \in \GL(A)$ and assume towards contradiction that $a \notin \CC$. Then the resolvent $z \mapsto (a - z)^{-1}$ is a holomorphic function defined on the Riemann sphere, so constant. Taking $z = \infty$, the resolvent is identically $0$, but also identically $a^{-1}$ (taking $z = 0$). This is a contradiction.
\end{proof}
Notice that this fails over $\RR$, as witnessed by $\CC$ as well as the quaternions $\mathbb H$. This is why we study Banach algebras over $\CC$.

\section{Ideals}
Let $I$ be an ideal of $A$. It is immediate that the norm-closure $\overline I$ is an ideal. Moreover, since $\GL(A) \ni 1$ is open, if $I$ is a proper ideal, then $I$ does not meet $\GL(A)$ and so $\overline I$ does not contain $1$, so $\overline \cdot$ preserves propriety. Therefore maximal ideals are closed. Moreover, for continuous morphisms, kernels are closed, so we might as well only study closed ideals.

If $I$ is a (left, right) ideal then $A/I$ is a (left, right) module over $A$, equipped with the seminorm
$$||a|| = \inf_{d \in I} ||a - d||.$$
In case $I$ is closed, this seminorm is actually a norm, and complete since $A$ is complete. So we end up with a Banach space.

\begin{definition}
    A \dfn{Banach module} over $A$ is an $A$-module $M$ which is a Banach space, such that
    $$||am||_M \leq ||a||_A ||m||_M.$$
\end{definition}
It is not very hard to check that $M = A/I$ is a Banach module. In fact, for $b, c \in I$, we have
$$||am||_M \leq ||(a - c)(m - d)||_A \leq ||a - c||_A ||m - d||_A.$$
Taking the $\inf$ over $c, d$ of both sides, we have
$$||am||_M \leq ||a||_A ||m||_M.$$
In case $I$ is two-sided, $M$ is a Banach $(A, A)$-bimodule, or in other words, a Banach algebra.

In what follows we use $\Hom(A, B)$ to mean the $K$-algebra of morphisms of $K$-algebras $A \to B$ over some field $K$ (which is usually $\CC$).

If $I$ is a maximal ideal, therefore, $A/I$ is a field, and so $A/I = \CC$ by the Gelfand-Mazur theorem. But a maximal ideal gives a epimorphism $A \to \CC$, and conversely, the kernel of a such an epimorphism is a maximal ideal. This gives a bijection between the maximal spectrum of $A$ and $\Hom(A, \CC) \setminus 0$, which we call $\hat A$.

\begin{lemma}
    Let $K$ be a field and $A$ a unital $K$-algebra. Let $\varphi \in \Hom(A, K)$. Then if $a \in A$, $\varphi(a) \in \sigma(a)$.
\end{lemma}
\begin{proof}
    We have $\varphi(a - \varphi(a)) = 0$.
\end{proof}
\begin{lemma}
    If $\varphi: A \to \CC$ is a nonzero morphism, then $||\varphi|| \leq 1$.
\end{lemma}
\begin{proof}
    $\varphi(a) \in \sigma(a)$ so $||\varphi(a)|| \leq ||a||$.
\end{proof}

Therefore $\hat A$ is contained in the unit ball $A'_1$ of the dual $A'$. Since nets in $\hat A$ act continuously on $A$, their pointwise convergence preserves operations of $A$. So $\hat A$ is closed. In particular, the Banach-Alaoglu theorem implies that $\hat A$ is a weakstar compact Hausdorff space.

\begin{definition}
    Let $a \in A$. The \dfn{Gelfand transform} $\hat a$ is the function
    $$\hat a(\varphi) = \varphi(a),$$
    for $\varphi \in \hat A$.
\end{definition}
Notice that $||\hat a||_{L^\infty(\hat A)} \leq ||a||_A$ and $\hat a(\hat A) \subseteq \sigma_A(a)$. Conversely, let $\lambda \in \sigma_A(a)$. Then $a - \lambda$ is not invertible, so there is a maximal ideal $I \supseteq (a - \lambda)$ and an epimorphism $\varphi$ such that $\ker \varphi = I$. Thus $\lambda \in \hat a(\hat A)$. Therefore $\hat A = \sigma_A(a)$, but the proof of this is highly nonconstructive.

\begin{example}
    Recall that $c_0(\NN)$, the set of $x \in \ell^\infty(\NN)$ such that $x_n \to 0$ as $n \to \infty$, is a closed ideal of $A = \ell^\infty(\NN)$. Therefore there is a $\varphi$ such that $\varphi(c_0(\NN)) = 0$. But, in fact, $\hat A = \beta\NN$, where $\beta$ is the Stone-Cech functor. It follows that it is consistent with ZF without the axiom of choice that $\varphi$ does not exist.
\end{example}

\begin{definition}
    Let $a \in A$. The \dfn{spectral radius} of $a$ is
    $$r(a) = \max_{\lambda \in \sigma(a)} |\lambda|.$$
\end{definition}
Equivalently, $r(a) = ||\hat a||_{L^\infty(\hat A)}$. Therefore we have $r(ab) \leq r(a)r(b)$. 

\section{The holomorphic functional calculus}
    As usual, let $A$ be a commutative Banach algebra.
\begin{definition}
    Let $a \in A$ and let $f$ be a holomorphic function on $D(0, ||a|| + \varepsilon)$. Put
    $$f(z) = \sum_{n=0}^\infty \alpha_n z^n.$$
    The \dfn{holomorphic functional calculus} is the morphism $f \mapsto f(a)$ defined by
    $$f(a) = \sum_{n=0}^\infty \alpha_n a^n.$$
\end{definition}
    The Taylor series of $f$ converges uniformly absolutely on $D(0, ||a||)$, so the partial sums of $f(a)$ form a Cauchy sequence in $A$. Therefore $f(a)$ is a well-defined element of $A$, and we can think of $f$ as a mapping $U \to A$, where $U$ consists of elements of $A$ that are small enough. If $f$ is entire, then $f$ lifts to a function $A \to A$.
\begin{theorem}[spectral mapping theorem]
    \index{spectral mapping theorem}
    If $\lambda \in \sigma(a)$ then $f(\lambda) \in \sigma(f(a))$. 
\end{theorem}
\begin{proof}
    We have
    \begin{align*}
        f(a) - f(\lambda) &= \sum_{n=0}^\infty \alpha_n(a^n - \lambda^n)
            = \sum_{n=0}^\infty \alpha_n(a - \lambda)(a^{n-1} + a^{n-2}\lambda + \dots + \lambda^{n-1})\\
            &= (a - \lambda)b
    \end{align*}
    for some $b$, if we can show that the partial sums are a Cauchy sequence. In fact
    $$||a^{n-1} + \dots + \lambda^{n-1}|| \leq n||a||^{n-1}$$
    which is the right-hand side of $f'(||a||)$ (which clearly converges, so partial sums are Cauchy). Therefore $f(a) - f(\lambda) = (a-\lambda)b$. So if $f(a) - f(\lambda)$ is invertible, then so is $a - \lambda$.
\end{proof}





\chapter{Preliminaries on $*$-algebras}
\section{Weights}
\begin{definition}
\index{weight}
Let $\mathcal A$ be a sub-$*$-algebra of $\mathcal B(\mathcal H)$. A map $\omega: \mathcal A^+ \to [0, \infty]$ is a \emph{weight} if $\omega$ is additive and if $\omega(ta) = t\omega(a)$ whenever $t \geq 0$.
\end{definition}

Fix a weight $\omega$. By $m_\omega$ we mean the span of the set of positive $a$ such that $\omega(a) < \infty$, and by $m_\omega^{sa}$ we mean the closure of the set of positive $a$ such that $\omega(a) < \infty$ under subtraction. Clearly $\omega$ extends uniquely to $m_\omega^{sa}$ by $\omega(b-c) = \omega(b) - \omega(c)$. So $\omega$ extends to a positive linear functional on $m_\omega$ in the obvious way. On the other hand, if $\varphi$ is any positive linear functional on $\mathcal B(\mathcal H)$, then $\varphi$ is a weight such that $m_\varphi = \mathcal B(\mathcal H)$.

Now we define $n_\omega$ to be the set of $a \in \mathcal A$ such that $\omega(a^*a) < \infty$, which is clearly a subspace of $\mathcal A$.
\begin{lemma}
    $n_\omega$ is a left ideal of $\mathcal A$.
\begin{proof}
    If $T \geq 0$ then
    \begin{align*}
        \langle S^*TS\xi, \xi\rangle
            &= \langle TS\xi, S\xi\rangle
            \leq ||T|| ||S\xi||^2\\
            &= ||T|| \langle S\xi, S\xi\rangle
            = ||T|| \langle S^*S\xi, \xi\rangle.
    \end{align*}
    So if $d \in \mathcal A$ and $a \in n_\omega$ then
    \begin{align*}
        (da)^*da = a^*d^*da \leq ||d^*d|| a^*a = ||d||^2 a^*a
    \end{align*}
    whence
    $$||\omega((da)^*(da)) \leq ||d||^2 \omega(a^*a) < \infty.$$
\end{proof}
\end{lemma}
\begin{definition}
\index{tracial weight}
If $\omega(a^*a) = \omega(aa^*)$ then $\omega$ is \emph{tracial}.
\end{definition}
Clearly if $\omega$ is tracial then $n_\omega$ is a two-sided ideal. For example, if $\omega$ is actually the trace,
$$\omega(x) = \sum_j \langle x^*xe_j, e_j\rangle$$
for $\{e_j\}_j$ an orthonormal basis of the separable Hilbert space $\mathcal H$, then $\omega$ is tracial and $n_\omega$ is just the space of trace-class operators and $\omega$ is tracial.

\index{polarization identity}
Recall the polarization identity:
$$4b^*a = \sum_{k=0}^3 i^k(a+i^kb)^*(a+i^kb).$$
From this we are justified in defining, on $n_\omega$,
$$\langle a, b\rangle_\omega = \omega(b^*a).$$
This would be an inner product if $N_\omega = \{a \in \mathcal A: \omega(a^*a) = 0\}$ were trivial. Clearly $N_\omega$ is a subspace, so we can take the completion of $n_\omega/N_\omega$ and recover a Hilbert space.

\section{The GNS construction}
\begin{definition}
    The completion of $n_\omega/N_\omega$ is denoted $L^2(\mathcal A, \omega)$.
\end{definition}
If $b \in n_\omega$, then
$$\langle ab, ab\rangle_\omega
    = \omega(b^*a^*ab)
    \leq ||a^*a|| \omega(b^*b) = ||a||^2 ||b||_\omega^2.$$
So if $a \in \mathcal A$ then $\xi \mapsto a\xi$ is a well-defined, bounded operator on $n_\omega/N_\omega$ and so extends to $L^2(\omega)$. 

\begin{definition}
    \index{$*$-representation}
    A \emph{$*$-representation} is a morphism of $*$-algebras (i.e. a morphism of algebras preserving $*$) into $\BB(\HH)$.
\end{definition}
If $a \in \AAA$, $b,c \in n_\omega$, then
$$\langle ab, c\rangle_\omega = \omega(c^*ab) = \omega((a^*c)^*b) = \langle b, a^*c\rangle_\omega,$$
which descends to $L^2(\omega)$. So we can define a $*$-representation
\begin{align*}
    L: \AAA &\to \BB(L^2(\omega))\\
        a &\mapsto (\xi \mapsto a\xi).
\end{align*}
\begin{definition}
    \index{GNS construction}
    \index{left regular representation}
    The map $L$ is called the \emph{GNS construction} (for Gelfand-Neimark-Segal) of $\AAA$, or the \emph{left regular representation} of $\AAA$.
\end{definition}
The GNS construction allows us to assume that $\AAA$ is actually acting on a Hilbert space, namely $L^2(\omega)$. So a $C^*$-algebra is always an operator algebra.

We can also define a right regular representation\index{right regular representation},
\begin{align*}
    R: \AAA &\to \BB(L^2(\omega))\\
        a &\mapsto (\xi \mapsto \xi a).
\end{align*}
Notice that $R$ is an antihomomorphism.

\begin{lemma}
    Assume that for each positive $a \in \AAA$, $\sqrt a$ exists. Then $m_\omega \subseteq n_\omega$, and in particular $m_\omega$ is a sub-$*$-algebra of $\AAA$.
    \end{lemma}
\begin{proof}
If $a \in m_\omega$ is positive, 
    $$\omega(\sqrt a^2) = \omega(\sqrt a^* \sqrt a) = \omega(a)$$
so $\sqrt a \in n_\omega$. Since $n_\omega$ is a left ideal, $a \in n_\omega$.
\end{proof}


\begin{example}
    Let $X$ be a measure space and $K \in L^2(X \times X)$. Then the integral operator $T_K: L^2(X) \to L^2(X)$ has $||T_K||_{\BB^2} = ||K||_{L^2}$. Indeed, if $\{\xi_n\}_n$ is a Hilbert basis for $L^2(X)$ then
\begin{align*}
    \sum_n ||T_k\xi_n||^2
        &= \sum_{m,n} |\langle T_k\xi_m, \xi_n\rangle|^2
        = \sum_{m,n} \left|\iint_{X \times X} K(x, y) \xi_n(y) \xi_m(x) ~dx ~dy\right|^2\\
        &= \sum_{m,n} |\langle K, \xi_m \otimes \xi_n\rangle|^2
        = ||K||_{L^2}
\end{align*}
    since the $\xi_m \otimes \xi_n$ form a Hilbert basis for $L^2(X \times X) = L^2(X) \otimes L^2(X)$.
\end{example}
\begin{example}
    If $\AAA = C([0, 1])$ and
    $$\omega(f) = \int_0^1 f(t) ~dt$$
    then $\omega$ is a tracial weight on $\AAA$ such that $n_\omega = \AAA$. But of course $n_\omega$ is a Banach space when given the $\BB^2 = L^2$ norm. Its completion is $L^2([0, 1])$.
\end{example}
\begin{proposition}
    Let $\omega$ be a tracial weight and $\AAA$ be a sub-$*$-algebra of $\BB_0(\HH)$. If $b \geq 0$ and $b \in m_\omega$, and $a \in \BB(\HH)$ then
    $$|\omega(ab)| \leq ||a||_{op}|\omega(b)|.$$
\end{proposition}
\begin{proof}
    We have
\begin{align*}
    |\omega(ab)|^2
        &= |\omega(a \sqrt b \sqrt b)|^2
        = |\omega(\sqrt b a \sqrt b)|^2
        = |\langle a \sqrt b, \sqrt b\rangle|^2\\
        &\leq \langle a\sqrt b, a\sqrt b\rangle \langle \sqrt b, \sqrt b\rangle
        = \omega(\sqrt b a^* a\sqrt b)\omega(b)
        \leq ||a||^2 \omega(b)^2.
\end{align*}
\end{proof}

\section{The $\BB^p$ spaces}
\begin{definition}
    If $T \in \BB^2(\HH)$ then $T$ is called a \dfn{Hilbert-Schmidt operator}.
\end{definition}
\begin{example}
    Let $\HH$ be the separable Hilbert space. Take $\AAA = \BB_0(\HH)$ and $\omega$ to be the trace. Since $\BB_0(\HH)$ has square roots and $\omega$ is tracial, we can apply the above result to prove that $n_\omega$ and $m_\omega$ are two-sided ideals and hence sub-$*$-algebras.
    
    If we write $|T| = \sqrt T^2$, and let $\BB^p(\HH)$ be the space of $T \in \BB_0(\HH)$ such that $\omega(|T|^p) < \infty$, then $\BB^1(\HH) = m_\omega(\HH)$ and $\BB^2(\HH) = n_\omega(\HH)$.
    
    We think of $\BB^p(\HH)$ as the noncommutative analogue of $\ell^p$.
\end{example}
Let's check that that example actually makes sense.
\begin{theorem}
    $\BB^2(\HH)$ is a Banach space.
\end{theorem}
\begin{proof}
    First observe that $||T||_{op} \leq ||T||_2$. To do this, compute the trace of $T$ by using an orthonormal basis containing a $\xi$ such that $||T\xi|| \geq ||T||_{op} - \varepsilon$. As this is possible for any $\varepsilon > 0$ the claim holds.
    
    Now assume that $\{T_n\}_n$ is $2$-Cauchy, so in particular $op$-Cauchy. So there is a $T \in \BB_0(\HH)$ such that $T_n \to^{op} T$.
    
    If $P$ is a finite-rank projection then $(T-T_n)P$ is a finite-rank operator, hence $\in \BB^2(\HH)$. So
\begin{align*}
    ||(T-T_n)P||_2^2
        &= tr P(T-T_n)^*(T-T_n)P
        = tr (T-T_n)P(T-T_n)^*
        = \lim_{k \to \infty} tr (T_k-T_n)P(T_k -T_n)^*\\
        &\leq \limsup_{k \to \infty} (T_k-T_n)(T_k-T_n)^*
        = \limsup_{k \to \infty} ||T_k-T_n||_2^2.
\end{align*}
Let $C_n = \limsup_{k \to \infty} ||T_k-T_n||_2^2$. Then $C_n \to 0$ and
$$||(T-T_n)P||_2^2 \leq C_n$$
regardless of the choice of $n$ and $P$. Since $T-T_n$ is a compact operator, we can approximate it arbitrarily well by $(T-T_n)P$ by choosing $P$. So $||T-T_n||_2^2 \to 0$.
\end{proof}
Recall the \dfn{polar decomposition} of $T \in \BB_0(\HH)$ is the factorization
$$T = V|T|$$
where $|T| = \sqrt T^2$ and $V$ is a \dfn{partial isometry}, i.e. an isometry on its cokernel.
\begin{lemma}
    If $T \in \BB^1(\HH)$ and $A \in \BB(\HH)$ then
    $$|tr(AT)| \leq ||A||_{op} tr|T|.$$
\end{lemma}
\begin{proof}
    Write $T = V|T|$. Then
\begin{align*}
    |tr(AT)|
        &= |tr(AV|T|)|
        \leq ||AV||_{op} tr|T|
        \leq ||A||_{op} tr|T|.
\end{align*}
\end{proof}
\begin{lemma}
    $||\cdot||_1 = tr|\cdot|$ is a norm on $\BB^1(\HH)$.
\end{lemma}
\begin{proof}
    Let $S,T \in \BB^1(\HH)$ and $S+T = W|S+T|$. Then
\begin{align*}
    tr|S+T|
        &= tr W^*(S+T)
        = tr(W^*S) + tr(W^*T)
        \leq |trW^*S| + |trW^*T|
        \leq tr|S| + tr|T|.
\end{align*}
\end{proof}
\begin{theorem}
    $\BB^1(\HH)$ is a Banach algebra.
\end{theorem}
\begin{proof}
    Since $||T||_{op} \leq ||T||_1$ the proof is basically the same as for Hilbert-Schmidt operators.
\end{proof}
\begin{theorem}
    $\BB^1(\HH)^* = \BB(H)$.
\end{theorem}
\begin{proof}
    If $A \in \BB(\HH)$, let $\Psi_A(T) = tr(AT)$. Then
$$||\Psi_A(T)|| \leq ||A||||T||_1.$$
    So $A \mapsto \Psi_A$ is an isometry and so $\BB(\HH) \subseteq \BB^1(\HH)^*$.
    
    Let $\Psi \in \BB^1(\HH)^*$ and $\xi,\eta \in \HH$. Define a bounded operator $\langle \xi, \eta\rangle_O$ by
    $$\langle \xi, \eta\rangle_O\zeta = \xi \langle \eta, \zeta\rangle.$$
    (So $\langle\cdot,\cdot\rangle_O$ is an operator-valued pseudo-inner product (the pseudo- here means that it could be zero).
    Define a semilinear form
    $$B_\Psi(xi, \eta) = \Psi\langle \xi, \eta\rangle_O.$$
    So $|B_\Psi(\xi, \eta)| \leq ||\Psi||||\xi||||\eta||$. Therefore by the Riesz representation theorem, there is an operator $A$ such that $B_\Psi(\xi, \eta) = \langle A\xi, \eta\rangle$. Therefore $||A|| = ||\Psi||$ and $\Psi = \Psi_A$. So $\BB^1(\HH)^* \subseteq \BB(\HH)$.
\end{proof}

\section{Representation theory of groups}
Let $G$ be a group with a good topology (so $G$ admits a Haar measure).

\begin{definition}
A \dfn{unitary representation} of $G$ is a continuous morphism of groups $G \to U(H)$. It is \dfn{irreducible} if the only $G$-invariant subspaces are trivial. 
\end{definition}
For $\pi$ a unitary representation, we have $\pi(x)^* = \pi(x)^{-1}$.

\begin{example}
    Let $G = \SL(3, \ZZ)$. Then the ``obvious" map $G \to \SL(3, \CC)$ is not a unitary representation. In fact $G$ has very few finite-dimensional unitary representations, because $G$ is not compact.
\end{example}

\begin{definition}
    The \dfn{left regular representation} of $G$ is the map $G \to U(L^2(G))$ given by
    $$\pi(x)(\xi)(y) = \xi(x^{-1}y).$$
\end{definition}

It is natural to want to study the subalgebra of $B(H)$ generated by $\pi(G)$ for $\pi$ a unitary representation. This will be given by linear combinations of the $\pi(x)$s as $x \in G$, which we identify with the space $C_c(G)$ of compactly supported continuous functions on $G$. Namely, for $f \in G$ we define
$$\pi(f) = \int_G f(x) \pi(x) ~dx.$$
\begin{definition}
    The norm-closure of $\pi(C_c(G))$ is the \dfn{reduced C$^*$-algebra} of $G$.
\end{definition}
Now an easy computation shows
$$\pi(f)\pi(g) = \pi(f*g)$$
and of course $\pi(f)^* = \pi(f^*)$ where we define $f^*(x) = \overline f(x^{-1})$. Finally, we observe that
$$||\pi(f)|| \leq ||f||_{L^1(G)}$$
so $\pi$ is a $*$-Banach algebra morphism which extends to a map
$$\pi: L^1(G) \to B(L^2(G)).$$
This leads to the abstract theory of Fourier transform.



\chapter{Compact operators}
Let $B_0(H)$ denote the algebra of compact operators in $H$. This is a closed ideal of $H$, hence a $C^*$ algebra (proof: it is the closure of the ideal $B_f(H)$ of finite rank operators in $H$.) It will be one of our main examples of a noncommutative, nonunital $C^*$ algebra.

\section{Representation theory}
We now study the representation theory of $B_0(H)$.

Like any $C^*$ algebra, $B_0(H)$ has a normalized approximate identity, sequential if $H$ is separable. Decompose $H$ by transfinite recursion as
$$H = \bigoplus_{\alpha < \kappa} \CC$$
where $\kappa$ is some cardinal ($\kappa = \aleph_0$ if $H$ separable) and the biproduct is in the category of Hilbert spaces. For $\lambda < \kappa$, let $H_\lambda = \bigoplus_{\alpha < \lambda} H_\lambda$ so $H$ is the injective limit of the $H_\lambda$; then let $e_\lambda$ be the natural projection $H \to H_\lambda$. The $e_\lambda$ form a net with respect to the natural ordering on $\kappa$ and are obviously an approximate identity.

Recall that if we fix a representation $\pi: A \to B(H)$, we can view $H$ as a module over $A$ by defining $a\xi = \pi(a)(\xi)$. Recall also that a representation is said to be nondegenerate if $HA$ is dense in $A$.

In fact, any representation of $B_0(H)$ is faithful. Since representations are continuous, and $B_0(H)$ has no closed ideals (since $B_f(H)$ contains all proper ideals of $B_0(H)$, and is dense in $H$), any representation of $B_0(H)$ is faithful.

There is a natural $*$-representation $B_0(H) \to B(H)$ given by the inclusion map. Since $e_\lambda\xi \to \xi$, this representation is nondegenerate. In some sense this is the only such representation.
\begin{lemma}
    A nondegenerate $*$-representation of $B_0(H)$ is isomorphic to a direct sum to copies of the representation $B_0(H) \to B(H)$. In particular, the only irreducible such representation is the representation $B_0(H) \to B(H)$. 
\end{lemma}
\begin{proof}
    Let $\langle \xi, \eta\rangle_0$ be the $B_0(H)$-valued inner product
    $$\langle \xi, \eta\rangle_0 \zeta = \xi \langle \eta, \zeta\rangle.$$
    In fact such an inner product has values in rank-$1$ operators since $\xi \langle \eta, \zeta\rangle$ lies in the span of $\xi$.

    For $T \in B(H)$, $T\langle \xi, \eta\rangle_0\zeta = (T\xi)\langle \eta, \zeta\rangle$ so $T\langle \xi, \eta\rangle_0 = \langle T\xi, \eta\rangle_0$, and $\langle \xi, \eta\rangle_0T = \langle \xi, T^*\eta\rangle_0$.

    Let $\pi: B_0(H) \to B(V)$ be a nondegenerate $*$-representation, $\xi \in H$ a unit vector. Then $\langle \xi, \xi\rangle_0$ is a rank-$1$ projection. Since $\pi$ is faithful, $\pi(\langle \xi, \xi\rangle_0)$ is a nonzero projection. Let $v$ be a unit vector of $\langle \xi, \xi\rangle_0(V)$ and define $Q: H \to V$ by $Q\eta = \langle \eta, \xi\rangle_0 v$. Then by a tedious computation, $Q$ is an isometry.

    We now show that $Q$ commutes the representations. Let $T = \langle \omega, \zeta\rangle_0$. Any operator in $B_0(H)$ can be written as an infinite linear combination of rank-$1$ operators so it suffices to show that $QT = TQ$. In fact,
    $$Q(T\eta) = \langle T\eta, \zeta\rangle_0 v = TQ(\eta).$$
    Also, $Q(H)^\perp$ is $\pi$-invariant, so we repeat the argument on $Q(H)^\perp$ to see that we have
    $$V = Q(H) \oplus Q(H)^\perp$$
    as $B_0(H)$-modules. Now run Zorn's lemma to keep decomposing $Q(H)^\perp$ until we hit an irreducible representation.
\end{proof}

This is a very remarkable property of $B_0(H)$. To see why, we need something stronger than ZFC.
\begin{definition}
    A \dfn{$\Diamond$-sequence} is a net of sets $\alpha \mapsto A_\alpha$, for $\alpha < \aleph_1$, such that for any $A \subseteq \aleph_1$,
    $$\hat A = \{\alpha < \aleph_1: A \cap \alpha = A_\alpha\}$$
    is stationary in $\aleph_1$.
\end{definition}
In other words, for every closed and unbounded (``club") set $C \subseteq \aleph_1$, $C \cap \hat A$ is nonempty. The existence of a $\Diamond$-sequence implies that $V = L$, in particular implying GCH.

Naimark conjectured that if $A$ was a $C^*$-algebra with only one irreducible representation, then $A = B_0(H)$. This is true if $A$ is separable.
\begin{theorem}[Ackemann-Weaver]
    If there is a $\Diamond$-sequence, then there is a $C^*$-algebra $A$ which has only one irreducible representation such that $A \neq B_0(H)$.
\end{theorem}

In this lemma, you should read $A = B(H)$ and $I = B_0(H)$.
\begin{lemma}
    Let $A$ be a $*$-normed algebra and $I$ a $*$-ideal of $A$ with normalized approximate unit. Then every nondegenerate $*$-representation of $I$ extends uniquely to $A$.
\end{lemma}
\begin{proof}
    Let $\pi: I \to B(H)$ be such a representation. Define
    $$\tilde \pi(a) \sum_\alpha \pi(d_\alpha) \xi_\alpha = \sum_\alpha \pi(ad_\alpha) \xi_\alpha$$
    where the $\xi_\alpha$ are a Hilbert basis of $H$. Then $\tilde \pi$ is a well-defined function since if $\sum_\alpha \pi(d_\alpha)\xi_\alpha = 0$, then
    $$\sum_\alpha \pi(ad_\alpha)\xi_\alpha = \lim_\lambda \sum_\alpha \pi(ae_\lambda d_\alpha) \xi_\alpha = \lim_\lambda \pi(ae_\lambda) \sum_\alpha \pi(d_\alpha)\xi_\alpha = 0$$
    since the $e_\lambda$ are a normalized approximate unit. This is unique because
    $$\tilde \pi(a)\pi(d)\xi = \pi(ad)\xi$$
    and the $\pi(ad)\xi$ are dense in $H$.
\end{proof}

\begin{lemma}
    Let $A,I$ be as above and let $\pi$ be an irreducible representation of $A$. Then either $I \subseteq \ker\pi$ or $\pi$ is an irreducible representation of $I$.
\end{lemma}
\begin{proof}
    Assume $I$ is not contained in $\ker \pi$. Then $\overline{IH}$ is nonzero and $A$-invariant. Since $\pi$ is irreducible, $\overline{IH} =H$. Therefore $\pi$ is a nondegenerate representation of $I$.

    We have $e_\lambda\xi \to \xi$ for any $\xi$ since $\pi$ is nondegenerate. Let $K \subseteq H$ be nondegenerate and nonzero. Using $e_\lambda$, $\overline{IK} = K$ so $\overline{IK}$ is $A$-invariant. Therefore since $\pi$ is irreducible, $K = H$.
\end{proof}

\begin{lemma}
    Let $A,I$ be as above. Let $\pi: A \to B(H)$ and $\rho: A \to B(K)$ be irreducible representations. If $\pi \cong \rho$ as representations of $I$, then $\pi \cong \rho$ as representations of $A$.
\end{lemma}
\begin{proof}
    Let $U: H \to K$ be an isomorphism of $I$-modules. For $d \in I$,
    $$U(\pi(a)\pi(d)\xi) = U(\pi(ad)\xi) = \rho(ad)U\xi = \rho(a)U(\pi(d)\xi).$$
    So $U\pi = \rho U$.
\end{proof}

\begin{theorem}[Burnside]
    Assume $H \neq \CC$. Let $A \subseteq B_0(H)$ be a $C^*$-algebra. If $A$ acts on $H$ irreducibly, then $A = B_0(H)$.
\end{theorem}
\begin{proof}
    By assumption on $H$, $A \neq 0$. Let $T \neq 0$. Then $T^*T \in A$ is nonzero, so we can assume without loss of generality that $T$ is self-adjoint. Moreover, $C^*(T, 1) = C(\sigma(T))$ acts on $H$ as an abelian monoid.

    Let $\lambda \in C(\sigma(T))$. Taking bump functions centered on $\lambda$ we can find a sequence of $\xi_n \in H$ such that $(T - \lambda)\xi_n \to 0$. Since $T$ is comapct, $T$ sends the unit ball of $H$ to a precompact set. So the $T\xi_n$ have a weak limit $\eta$. Thus $T\eta = \lambda\eta$. Therefore $T$ has an eigenvector for $\lambda$. So the only limit point of $\sigma(T)$ is $0$, because the other eigenvectors are all orthogonal.

    Let $P$ be a projection of minimal rank in $A$. We claim that $P$ is a rank-$1$ projection. In fact, $PTP$ is a self-adjoint operator on the finite-dimensional space $PH$, so has spectral projections in $A$ whose rank is the same as that of $P$ by minimality. Thus there is a unique such spectral projection; i.e. there is an $s \in \RR$ such that $PTP = sP$. Moreover, if $\xi,\eta \in PH$ are orthonormal, $R \in A$, then $\langle R\xi, \eta\rangle = s\langle\xi, \eta\rangle = 0$. Therefore $\langle A\xi, \eta\rangle = 0$, yet $A$ acts irreducibly, which is a contradiction. Therefore $P$ is a rank-$1$ projection.

    Now $R,S \in A$ implies that $RPS$ is a rank-$1$ projection. Thus $\overline{APAH} = H$. So $\overline{APA}$ is the set of rank-$1$ operators. Any compact operator can be written as an infinite linear combination of those.
\end{proof}

\begin{corollary}
    Let $A$ be a $C^*$-algebra and $\pi: A \to B(H)$ an irreducible representation. If $\pi(A)$ contains a nonzero compact operator then $\pi(A)$ contains $B_0(H)$.
\end{corollary}
\begin{proof}
    Let $I = \pi(A) \cap B_0(H)$. Then $I$ acts irreducibly on $H$ so by Burnside's theorem, $\overline{\pi(I)} = B_0(H)$. But $\pi$ takes $I/\ker \pi$ to $B_0(H)$ isometrically (since it is injective), so $\pi(I)$ is closed since $I$ is complete. Thus $\pi(I) = B_0(H)$.
\end{proof}


\section{The liminal dichotomy}
Let $A$ be a $C^*$-algebra. We write $\hat A$ to denote the set of all isomorphism classes of irreducible representations of $A$.

\begin{definition}
    Let $\pi: A \to B(H)$ range over $\hat A$. We say that $A$ is \dfn{liminal} or \dfn{CCR} if for every $\pi$, $\pi(A) = B_0(H)$. We say $A$ is \dfn{postliminal} or \dfn{GCR} if for every $\pi$, $B_0(H) \cap \pi(A) \neq 0$. We say $A$ is \dfn{antiliminal} or \dfn{NCR} if for every $\pi$, $B_0(H) \cap \pi(A) = 0$.

    If $A$ is a von Neumann algebra, we say that $A$ is \dfn{type-I} if $A$ is postliminal. We say that $A$ is \dfn{non-type-I} if $A$ is not postliminal.
\end{definition}
    We will prove later that if $G$ is a semisimple Lie group or a nilpotent Lie group, then $C^*(G)$ (by which we really mean $C^*(L^1(G))$) is CCR. But if $G$ is solvable we cannot even prove that $C^*(G)$ is GCR.
\begin{example}
    Let $\alpha$ be the Lie action of $\RR$ on $\CC^2$ by $\alpha(t)(z, w) = (e^{2\pi it}z, e^{2\pi i\mu t}w)$ where $\mu$ is irrational. Then we take the outer semidirect product $G = \CC^2 \times_\alpha \RR$. Then $C^*(G)$ is not GCR.
\end{example}
\begin{theorem}
    Let $\pi: A \to B(H)$ be an irreducible representation and let $I = \ker \pi$. If $\pi(A) \cap B_0(H) \neq 0$ then for every irreducible representation $\rho$ of $A$ such that $\ker \rho = I$, $\rho \cong \pi$. 
\end{theorem}
\begin{proof}
    Let $J = \pi^{-1}(B_0(H))$, so $I \subseteq J$. Then $\pi$ is an irreducible representation of $J$ with kernel $I$, so drops to an irreducible representation of $J/I$. By Burnside's theorem, $\pi$ is an isomorphism $J/I \to B_0(H)$.

    But by assumption on $\rho$, $\rho$ is an isomorphism $J/I \cong B_0(H)$. Since there can be only one irreducible representation of $B_0(H)$, $\rho \cong \pi$ as representations of $J$. But $\rho,\pi$ extend uniquely to $A$, so $\rho \cong \pi$ as representations of $A$.
\end{proof}
\begin{corollary}
    If $A$ is a GCR algebra, then every representation of $A$ is uniquely determined by its kernel.
\end{corollary}
\begin{definition}
    A \dfn{primitive ideal} is a kernel of some irreducible representation.
\end{definition}
    So if $A$ is GCR, then there is a bijection between $\hat A$ and the set of primitive ideals of $A$. On the other hand, NCR algebras are very bad:
\begin{theorem}
    Let $\pi: A \to B(H)$ be an irreducible representation and assume $\pi(A) \cap B_0(H) = 0$. Then there are uncountably many irreducible representations $\rho$ of $A$ such that $\ker \rho = \ker \pi$.
\end{theorem}
    In fact Mackey showed that in some sense the set of representations sharing a kernel with $\pi$ is ``unclassifiable."
\begin{example}
    Let $A$ be a unital, infinite-dimensional, simple $C^*$-algebra and $\pi: A \to B(H)$ an irreducible representation. Since $A$ is simple, it has no proper ideals; yet $\pi^{-1}(B_0(H))$ is an ideal. If $\pi^{-1}(B_0(H)) = A$ then $A$ is not unital, a contradiction. So $\pi(A) \cap B_0(H) = 0$. Therefore $A$ is an NCR algebra.
\end{example}
\begin{theorem}
    Every primitive ideal is prime.
\end{theorem}
\begin{proof}
    Let $I$ be a primitive ideal of $A$, say $I = \ker \pi$. Let $J_1,J_2$ be ideals of $A$ such that $J_1J_2 \subseteq I$. If $J_1 \subseteq I$ there is nothing to prove. Otherwise, $\pi(J_1) \neq 0$, so $\overline{\pi(J_1)H} \neq 0$ is $\pi$-invariant. By irreducibility, $\overline{\pi(J_1)H} = H$, so $\overline{\pi(J_2)H} = \overline{\pi(J_2)\pi(J_1)H} = \overline{\pi(J_1J_2)H} \subseteq \overline{\pi(I)H} = 0$. So $J_2 \subseteq I$.
\end{proof}
    Recall that the prime spectrum $\Spec R$ of a ring $R$ is defined by the Zariski (or Jacobson, or hull-kernel) topology is given by declaring that $S \subset \Spec R$ is closed if there is an ideal $I$ such that $S = \{J \in \Spec R: J \subseteq I\}$. By the above theorem, if $R$ is a $C^*$-algebra, then the Zariski topology drops to a topology on the set of primitive ideals $\Prim R$. This topology is far from Hausdorff but is at least locally compact.

    In fact, if $A$ is separable, then every closed prime ideal of $A$ is primitive. This follows from applying the Baire category theorem to $\Prim A$. This does not work in general: Weaver used transfinite induction to find a counterexample if $A$ is not separable. (It may be undecidable whether there is a counterexample in ZF alone.)

\chapter{Generators and relations}
We now study $C^*$-algebras determined by generators and relations.

\section{Construction of maximally free algebras}
Let $\{a_i\}$ be a set of generators, and take the free $*$-algebra $F$ over $\CC$ generated by the $a_i$. This is the set of noncommutative polynomials in the $a_i$ and $a_i^*$ (where $a_i^*$ is just a formal symbol for now).

Given a set $R$ of relations, we can view $R$ as noncommutative polynomial equations. So we take the ideal $(R, R^*)$, which is the $*$-ideal generated by $R$. Then we let $A = F/(R, R^*)$, which is a $*$-algebra still. We consider the set $\Pi$ of all $*$-representations of $A$. Then for $a \in A$ we set
$$||a|| = \sup_{\pi \in \Pi} ||\pi(a)||.$$
A priori we have $||a|| = \infty$. This happens if $F$ is the free $*$-algebra on one generator. So we need $R$ to force $||a_i|| < \infty$ for each generator $a_i$. 

Assume that $R$ forces $||a_i|| < \infty$ (for example, if the generators are sent to unitary operators). Since the image of every $\pi \in \Pi$ is a $C^*$-algebra, $||\cdot||$ is a seminorm satisfying the $C^*$-identity $||a^*a|| = ||a||^2$. So we take the completion with respect to $||\cdot||$; i.e. we annihilate the kernel of the seminorm and then complete. What is left over is a $C^*$-algebra.

Just because a set of generators and relations gives a valid $C^*$-algebra of $A$ does not mean that we necessarily can find a natural, faithful representation. Moreover, even if we have a natural, faithful representation of $A$, the norm arising from that representation is not necessarily the norm given by taking the supremum over $\Pi$.

\begin{example}
Let $G$ be a discrete group, which we view as a set of generators. We impose relations corresponding to each true relation in $G$. (This can be viewed as taking the first-order theory of $G$.) We also take the relations $x^* = x^{-1}$ for $x \in G$ so the resulting maximally free operator algebra $A$ naturally represents the elements of $G$ as unitary operators. Therefore for $x \in G$ we have $||x|| = 1$; so $A$ is actually a $C^*$-algebra. In fact, it is easy to see that $A$ is the completion of $C_c(G)$, i.e. finitely supported functions on $G$. In other words, $A = C^*_r(G)$ is the reduced group $C^*$-algebra.

Moreover, $A$ acts on $\ell^2(G)$ by left translation, since $G$ does. This representation is faithful, so $A$ is unusual amongst the free $C^*$-algebras in that it has a natural faithful representation. In general, the norm in $\ell^2(G)$ does not always agree with the norm on $A$; this happens if and only if $G$ is an \dfn{amenable group}. (It turns out that since $G$ is discrete, $G$ is amenable if and only if there is a finitely additive, left-invariant probability measure on $G$. For example, this fails if $G$ is the free group on $n$ letters, $n \geq 2$.)
\end{example}

\section{Tensor products of $C^*$-algebras}
An important application of generators and relations is the ability to define the tensor product of $C^*$-algebras.
\begin{definition}
    Let $A,B$ be unital $C^*$-algebras. Their \dfn{tensor product} $A \otimes B$ is the $C^*$-algebra with generators $A \cup B$ and relations consisting of all true relations in $A$, all true relations in $B$,
    $$\forall a\in A~\forall b\in B~ab = ba,$$
    and $\forall x ~(1_A1_B)x = x$.
\end{definition}
The relation $ab = ba$ is the ``tensor product relation", so we can reasonably think of $ab$ as $a \otimes b$. Similarly, the relation $(1_A1_B)x = x$ requires that $1_{A \otimes B} = 1_A1_B$, so $A \otimes B$ is unital. We have embeddings $A \to A \otimes B$, $B \to A \otimes B$ given by $a \mapsto a \otimes 1_B$ and $b \mapsto 1_A \otimes b$.

To see that this is actually well-defined (i.e. has finite norm), let $\pi$ be a $*$-representation of $A \otimes B$. Then $\pi$ restricts to a $*$-representation of $A$ (and similarly to $B$) along the mapping $A \to A \otimes B$. Therefore for any $a \in A$,
$$||\pi(a \otimes 1_B)|| \leq ||a||.$$
Similarly for $B$; so there is an upper bound on the norm of any generator. Therefore $A \otimes B$ is a $C^*$-algebra.

\begin{example}
    Let $X,Y$ be compact Hausdorff spaces. Then we have $C(X \times Y) = C(X) \otimes C(Y)$.
\end{example}

We now consider the representation theory of tensor products.
\begin{definition}
    Let $\pi: A \to B(H)$ and $\rho: B \to B(K)$ be representations. The \dfn{tensor product of representations} $\pi \otimes \rho: A \otimes B \to B(H \otimes K)$ is defined by
    $$\pi \otimes \rho(a \otimes b)(\xi \otimes \eta) = \pi(a)\xi \otimes \rho(b)\eta.$$
\end{definition}
The norm induced by the tensor product of representations is also a $C^*$-norm, so we have two reasonable $C^*$-norms on $A \otimes B$. If we use the norm obtained by taking the supremum over representations, we emphasize this by writing $A \otimes_{max} B$. If we are using the norm obtained by the tensor product of Gelfand-Naimark-Segal representations, we write $A \otimes_{min} B$.
\begin{example}[Takesaki, 1959]
    Let $G$ be the free group on $2$ generators, $\lambda$ its left regular representation, $\rho$ its right regular representation. Consider the tensor product $C_r^*(G) \otimes C_r^*(G)$, represented by $\lambda \otimes \rho$. Then the two norms given above are the ``minimum" (i.e. tensor product $\lambda \otimes \rho$) and ``maximum" norms respectively, but there are many intermediate norms between the two that have been studied in recent years. In particular, the tensor product does not have a unique norm.
\end{example}
\begin{definition}
    A \dfn{nuclear $C^*$-algebra} $A$ is a $C^*$-algebra such that for every $C^*$-algebra $B$, the norm on $A \otimes B$ is unique.
\end{definition}
\begin{example}
    $B_0(H)$ is nuclear, since it uniquely embeds in $B(H)$. It follows that any GCR algebra is nuclear. But if $G$ is a discrete group, then $C^*(G)$ is nuclear if and only if $G$ is amenable. Thus the free group on $2$ generators is not nuclear. 
\end{example}
\begin{definition}
    An \dfn{exact $C^*$-algebra} $A$ is a $C^*$-algebra such that $A \otimes_{min} \cdot$ is an exact functor.
\end{definition}
    Note that $A \otimes_{max} \cdot$ is an exact functor for any $A$.

We now treat the coproduct in the category of $C^*$-algebras.
\begin{definition}
    The \dfn{free product} of $C^*$-algebras $A, B$, $A*B$, is defined to have generators $A \cup B$ and relations induced from $A,B$ as well as $1_A = 1_B$.
\end{definition}
The norm is defined as in the case of tensor products. A representation of $A*B$ consists of a pair of representations of $A$ and $B$ on the same Hilbert space, by the universal property.

\section{Noncommutative dynamical systems}
\begin{definition}
    A \dfn{noncommutative dynamical system} is an action of a group $G$ on a $C^*$-algebra $A$.
\end{definition}

    Often it is convenient that a noncommutative dynamical system is taking place inside a Hilbert space $H$.
\begin{definition}
    Let $\alpha: G \to \Aut(A)$ be a noncommutative dynamical system. Let $\pi: A \to B(H)$ a $*$-representation, $U: G \to U(H)$ a unitary representation. If the dynamical system satisfies the \dfn{covariance relation}
    $$\alpha(x)a = U_x\pi(a)U_x^*,$$
    then $(\pi, U)$ is called a \dfn{covariant representation} of $\alpha$.
\end{definition}

    we now define $*$-operations on $C_c(G \to A)$. If $f,g \in C_c(G \to A)$ then
\begin{align*}\left(\sum_x f(x)x\right)\left(\sum_y g(y)y\right) &= \sum_{x,y} f(x)xg(y)y \\
    &= \sum_{x,y} f(x)\alpha(x)(g(y))xy\\
    &= \sum_{x,y} f(x)\alpha(x)(g(x^{-1}y))y.
\end{align*}
    This motivates the following definition.
\begin{definition}
    If $\alpha$ is a noncommutative dynamical system, then for $f,g \in C_c(G \to A)$, we define
    $$(f*g)(y) = \sum_x f(x) \alpha(x)(g(x^{-1}y)),$$
    the \dfn{twisted convolution} of $f,g$ by $\alpha$.
\end{definition}
\begin{definition}
    If $\alpha$ is a noncommutative dynamical system, $f \in C_c(G \to A)$, then
    $$f^*(x) = \alpha(x)(f(x^{-1})^*),$$
    the \dfn{twisted involution} of $f$ by $\alpha$. 
\end{definition}
    With twisted convolution and involution, $C_c(G \to A)$ is a $*$-algebra. Moreover, we have an injective mapping $A \to C(G \to A)$ give by $a \mapsto a\delta_1$, $1$ the identity of the group. We also have an injective mapping $G \to C(G \to M(A))$ with $x \mapsto 1x$ (here $1$ is the identity of the noncommutative Stone-Cech compactification $M(A)$; if $A$ is unital then $A = M(A)$.

\begin{definition}
    Given any covariant representation $(\pi, U)$ of $\alpha: G \to \Aut(A)$ we call the \dfn{integrated form} $\sigma$, a $*$-representation $\sigma: C_c(G, A) \to B(H)$ by
    $$\sigma(f) = \sum_x \pi(f(x))U_x.$$
\end{definition}
    The set of all possible integrated forms is bounded. Therefore we can make the following definition by generators and relations:
\begin{definition}
    The $C^*$-algebra generated by $C_c(G, A)$ and $A$ is called $C^*(G, A)$ or $A \rtimes_\alpha G$. It is called the \dfn{crossed product $C^*$-algebra} or the \dfn{covariance $C^*$-algebra}.
\end{definition}
    The generators of $A \rtimes_\alpha G$ will consist of all elements of $G$ and of $A$, the relations will be all relations in $G$ and $A$ as well as
    $$xa = \alpha(x)ax$$
    since $G$ acts on $A$ by convolution (since $\alpha$ has a covariant representation).

    To see that that there are, in fact, covariant representations, we give an explicit one.
\begin{definition}
    Let $\rho: A \to B(H_0)$ be a $*$-representation, and define
    $$H = \ell^2(G \to H_0) = \ell^2(G) \otimes H_0.$$
    Now define a unitary representation of $G$ on $H$ by (for $x,y \in G$, $\xi \in H$)
    $$U(x)(\xi)(y) = \xi(x^{-1}y).$$
    We then define $\pi: A \to B(H)$ by
    $$\pi(a)(\xi)(x) = \rho(\alpha(x^{-1})(a))(\xi)(x),$$
    which is a $*$-representation. It is called the \dfn{induced covariant representation} of $\alpha$ by $\rho$.
\end{definition}
\begin{lemma}
    The induced covariant representation is covariant.
\end{lemma}
\begin{proof}
    We have 
\begin{align*}U(x)(\pi(a))(\xi)(y) &= (\pi(a)(\xi))(x^{-1}y) = \rho(\alpha((x^{-1}y)^{-1}))(U(x)(\xi))(y)\\
    &= \rho(\alpha(y^{-1}x)(a)) = \rho(\alpha(y^{-1})(\alpha(x))(a))(U(x)(\xi))(y)\\
    &= (\pi(\alpha(x)(a))U(x)(\xi))(y).
\end{align*}
    So
    $$U(x)(\pi(a))(\xi) = \pi(\alpha(x)(a)U(x))(\xi)$$
    which implies
    $$U(x)(\pi(a)) = \pi(\alpha(x)(a))U(x)$$
    so that $(\pi, U)$ is a covariant representation.
\end{proof}
    If $K$ is a subgroup of $G$, $(\rho, V)$ a covariant representation of $\alpha|_K$ on $H_0$, then the induced representation of $(\rho, V)$ is a covariant representation of $\alpha$. Here $H = \ell^2(G/H) \otimes H_0$.
\begin{definition}
    The \dfn{reduced group $C^*$-algebra of the representation} $\alpha$, $C^*_r(A, G, \alpha)$, is the $C^*$-algebra generated by $C_c(G \to A)$ with $||f||$ defined to be the supremum of $||\sigma(f)||$ for $\sigma$ ranging over the integrated forms of induced covariant representations.
\end{definition}
\begin{definition}
    If $C^*(A, G, \alpha) = C^*_r(A, G, \alpha)$, then $\alpha$ is said to be an \dfn{amenable action}.
\end{definition}
    If $\alpha$ is trivial, then
    $$C^*(A, G, \alpha) = A \otimes C^*(G)$$
    so the theory of covariant representations includes the theory of unitary representations.

    Though all the above theory was developed for discrete groups, it works fine for locally compact groups, as we now describe in detail. In fact, if $G$ is a locally compact group, then we consider the left Haar measure $\mu$, which is a Radon measure that is unique up to positive scalars (but need not be two-sided). Moreover, if $y \in G$, if we let
    $$\nu(f) = \int_G f(xy) ~d\mu(x)$$
    then $\nu$ is a left Haar measure, so we can find a $\Delta(y)$ such that $\nu = \Delta(y)\mu$.
\begin{definition}
    The function $\Delta: G \to \RR^+$ is called the \dfn{modular function} of $G$.
\end{definition}
    The modular function is a continuous morphism of groups.
\begin{definition}
    A group is \dfn{unimodular} if $\Delta = 1$.
\end{definition}
    For unimodular groups, the left and right Haar measures coincide. So any abelian group is unimodular. Moreover, $\RR^+$ has no compact subgroups, so any compact group is unimodular. Semisimple Lie groups and nilpotent Lie groups can also be shown to be unimodular. Solvable Lie groups are often not unimodular.
\begin{example}
    Let $(M, \omega)$ be a Poisson manifold (e.g. $\omega$ is a symplectic form on $M$). We let $h$ be a semiclassical parameter for a family of noncommutative ring structures on $C_c^\infty(M \to \CC)$, so we can view $(M, \omega, h)$ as a family of operator algebras. There is a notion of modular function for $M$.
\end{example}
    The trouble with locally compact groups is that the maps $G \to U(H)$ are typically not norm-continuous. In fact, this is already apparent for the left regular representation $\RR \to U(L^2(\RR))$, where we take a function with compact support and translate it by far outside its support.
\begin{definition}
    An action $\alpha$ of $G$ on a Banach space $A$ is \dfn{strongly continuous} if for every $a \in A$, $x \mapsto \alpha(x)(a)$ is continuous.
\end{definition}
    This is the correct definition of the continuity of a representation of a locally compact group.
\begin{definition}
    If $G$ is a locally compact group, a $C^*$-dynamical system for $G$ is a strongly continuous action of $G$ on a $C^*$-algebra. A \dfn{covariant representation} of the $C^*$-dynamical system is one which is also strongly continuous.
\end{definition}
    The integrated form of a covariant representation $(\pi, U)$ of a $C^*$-dynamical system is given by
    $$\sigma_f(\xi) = \int_G \pi(f(x))U(x)(\xi) ~dx.$$
    Using Bochner integration, we can define the integrated form for any $f \in C_c(G \to A)$. Now
    $$||\sigma_f(\xi)|| \leq \int_G ||f(x)|| ~dx ~||\xi||$$
    so it follows that $||\sigma_f|| \leq ||f||_{L^1(G)}$. So $\sigma$ extends to $L^1(G \to A)$. Though the elements of $C_c(G \to A)$ are functions, it makes sense to think of them as Radon-Nikodym derivatives of $A$-valued measures on $G$ with respect to Haar measure. As in the theory of discrete groups, $\sigma_f\sigma_g = \sigma_{f*_\alpha g}$ where the twisted convolution is defined by
    $$f*_\alpha g(x) = \int_G f(y) \alpha(y)(g(y^{-1}x))(y) ~dy.$$
    Therefore $||f*_\alpha g||_{L^1(G)} \leq ||f||_{L^1(G)}||g||_{L^1(G)}$.

    Another complication comes in the form of groups that are not unimodular. This happens because
\begin{align*}
    \sigma_f^* &= \int_G \pi(f(x))U_x ~dx = \int_G U_x^* \pi(f(x))^* ~dx\\
    &= \int_G U_{x^{-1}} \pi(f(x))^* ~dx = \Delta(x) \int_G U_x\pi(f(x^{-1})^*) ~dx.
\end{align*}
    Therefore we must define the twisted involution
    $$f^*(x) = \Delta(x)\alpha(x)(f(x^{-1})^*)$$
    if we want $\sigma_f^* = \sigma_{f^*}$.
\begin{example}
    Let $G$ be the group of affine transformations of $\RR$ (the ``$ax + b$ group"). This group is far from unimodular, and its action on $\RR$ is important in the theory of wavelets. So the modular function is important in signal processing.
\end{example}
    We write $C^*(A, G, \alpha) = A \rtimes_\alpha G$ for the completion of $C_c(G \to A)$ with respect to the norm given by taking the supremum over all integrated forms. The reduced algebra $A \rtimes_\alpha^r G$ is given by taking the supremum over all integrated forms arising from covariant representations.

    Now $L^1(G)$ does not have an identity since it does not have a delta function if $G$ is not discrete. But we could always take an approximate delta function. Specifically, we let $\Lambda$ denote the filter of all open sets containing the identity $1$ of $G$. (A filter-base also suffices.) Then given a neighborhood $\lambda$ of $1$, let $f_\lambda \in C_c(G \to \RR^+)$ be supported in $\lambda$ with $||f_\lambda||_{L^1(G)} = 1$. We view $f_\lambda$ as a probability measure carried by $\lambda$. Obviously the $(f_\lambda)_\lambda$ are an approximate delta function in $L^1(G)$.

    Let $\alpha$ be an action of $G$ on a $C^*$-algebra $A$ with approximate identity $(e_\mu)_\mu$. We then define
    $$h_{\mu,\lambda}(x) = f_\lambda(x) e_\mu$$
    to obtain an approximate identity for $L^1(G \to A)$.

\begin{theorem}
    There is a natural bijection between nondegenerate $*$-representations of $A \rtimes_\alpha G$ and covariant representations of $\alpha$. 
\end{theorem}
\begin{proof}[Proof sketch]
    Let $\sigma$ be a nondegenerate $*$-representation of $A \rtimes_\alpha G$ and consider its multiplier algebra $M(A \rtimes_\alpha G)$. We have an injection $G \to M(A \rtimes_\alpha G)$ by $x \mapsto \delta_x$, using the fact that $L^1(G)$ is a $2$-sided ideal in the multiplier algebra $M(G)$, where we think of double centralizers as finite Radon measures (this is true up to natural isomorphism). We also have an injection $A \to M(A \rtimes_\alpha G)$, by $a \mapsto a \delta_{1_G}$. We can therefore obtain a covariant representation $(\pi, U)$ of $\alpha$ obtained by restricting $\sigma$ to $A,G$. It follows that $\sigma$ is the integrated form of $(\pi, U)$.
\end{proof}
    In particular, it makes sense to talk about the hull-kernel topology on the set of covariant representations of $\alpha$.

\begin{definition}
    For $G$ a locally compact group, we let $(A, \alpha)$ and $(B, \beta)$ be $C^*$-dynamical systems. Let $\varphi: A \to B$ be a $*$-morphism. Then $\varphi$ is a \dfn{equivariant morphism} with respect to $\alpha,\beta$ if for every $a \in A$,
    $$\varphi(\alpha(x)(a)) = \beta(x)(\varphi(a)).$$
\end{definition}
    The category of $C^*$-dynamical systems over $G$ has equivariant morphisms as its morphisms by definition. Equivariant morphisms $\varphi:A \to B$ give rise to maps $C_c(G \to A) \to C_c(G \to B)$ given by
    $$\varphi(f)(x) = \varphi(f(x)).$$
    This naturally extends to the group $C^*$-algebras, so gives rise to a morphism $\varphi: A \rtimes_\alpha G \to B \rtimes_\alpha G$. Therefore the following theorem holds.
\begin{theorem}
    The map $\alpha \mapsto A \rtimes_\alpha G$ is a functor from the category of $C^*$-dynamical systems over $G$ to the category of $C^*$-algebras.
\end{theorem}
    Using category theory, we can obtain the following theorem.
\begin{theorem}
    Let $(A, \alpha)$ be a $C^*$-dynamical system. Let $I$ be an $\alpha$-invariant ideal of $A$. Then the natural action of $\alpha$ on $A/I$is a $C^*$-dynamical system, and the natural arrows
    $$0 \to I \rtimes_\alpha G \to A \rtimes_\alpha G \to (A/I) \rtimes_\alpha G \to 0$$
    form a short exact sequence.
\end{theorem}
    In other words, the functor $\cdot \rtimes_\alpha G$ is exact on $\alpha$-invariant ideals. This is not true for the reduced product.
\begin{proof}
    Consider the short exact sequence
$$\begin{tikzcd}0 \arrow[r]& I\arrow[r,"i"] & A\arrow[r,"p"] & A/I\arrow[r] &0\end{tikzcd}.$$
    Straight from the definitions, the induced map $p^*$ is onto and $p^*(i^*(C_c(G, A))) = 0$. So $i^*$ maps into the kernel of $p^*$.

    We now claim that the induced map $i^*$ is injective. Let $\sigma$ be a faithful representation of $I \rtimes_\alpha G$. Let $(\pi, U)$ the covariant representation of $\sigma$. Then if $\sigma$ is nondegenerate, so is $(\pi, U)$. Then $\pi$ extends to a representation $\tilde \pi$ of $A$. Since $\pi$ is nondegenerate, we can restrict to the image of $\pi(I)$ without any loss of generality when proving that $(U, \tilde \pi)$ is covariant. In fact,
    $$U(x)\tilde \pi(a)(\pi(d)\xi) = \pi(\alpha(x)(ad))U(x)\xi$$
    which proves covariance of $(U, \tilde \pi)$. So let $\tilde \sigma$ be a representation of $A \rtimes_\alpha G$ for which $(U, \tilde \pi)$ is a covariant representation. Then
    $$\tilde\sigma|_{i^*(I \rtimes_\alpha G)} = \sigma,$$
    so $\tilde \sigma \circ i^*$ is faithful on $I \rtimes_\alpha G$. Therefore $\ker i^* = 0$. In particular $I \rtimes_\alpha G$ is isomorphic to an ideal of $A \rtimes_\alpha G$, and without loss of generality we assume that they are equal (i.e. $i^*$ is the identity).

    Finally we show exactness at $A \rtimes_\alpha G$; i.e. $\ker p^* \subseteq I \rtimes_\alpha G$. Since $I \rtimes_\alpha G$ is a $C^*$-algebra, $A \rtimes_\alpha G/I \rtimes_\alpha G$ exists, and has a faithful representation $\sigma$. Pulling $\sigma$ back along the quotient map $A \rtimes_\alpha G \to A \rtimes_\alpha/I \rtimes_\alpha G$, we obtain a representation of $A \rtimes_\alpha G$. Let $(\pi, U)$ be the corresponding covariant representation of $A \rtimes_\alpha G$.

    Let $d \in I$, $h \in C_c(G)$. Let $f \in C_c(G \to I) \subseteq I \rtimes_\alpha G$ be defined by
    $$f(x) = h(x)d$$
    so $\sigma(f) = 0$. Thus
    $$0 = \int_G \pi(d)f(x)U(x) ~dx = \pi(d) \int_G f(x)U(x) ~dx.$$
    Since the integral on the right does not have to be zero, $\pi(d) = 0$. So $I \subseteq \ker \pi$. Therefore $\pi$ drops to a representation $\tau$ of $A/I \rtimes_\alpha G$. It is routine to prove that $\sigma = \tau \circ p^*$. So $\ker \sigma = \ker p^* \subseteq I \rtimes_\alpha G$.
\end{proof}
    Note that the representation $\tau$ may not exist on the reduced product, which explains why the theorem fails there.

\section{Group actions on locally compact spaces}
    Let $A$ be a commutative $C^*$-algebra and let $G$ be a locally compact group which acts on $A$ by $\alpha$. Then we can find a locally compact Hausdorff space $M$ such that $A = C_\infty(M)$. We have an action $\alpha$ of $G$ on $M$ by homeomorphisms, and $G \times M$ is locally compact. We will assume that $\alpha$ is \dfn{jointly continuous}, i.e. the map
\begin{align*}
    G \times M &\to M\\
    (x, m) &\mapsto \alpha(x)m
\end{align*}
    is continuous. Thus the action
    $$\alpha(x)(f)(y) = f(\alpha(x)^{-1}y)$$
    of $G$ on $C_c(M) \subseteq A$ is isometric, in particularly, strongly continuous in $L^\infty$-norm. Moreover, $\alpha$ is continuous in the inductive limit topology of $C_c(M)$. Therefore if $\mu$ is an $\alpha$-invariant Radon measure on $M$, $\alpha$ acts strongly continuously on $L^p(\mu)$.

    We now consider $A \rtimes_\alpha G$, which contains $C_c(G \to A)$. Since
    $$(f *_\alpha g)(y) = \int_G f(x)\alpha(x)(g(x^{-1}y)) ~dx,$$
    it follows that
    $$(f *_\alpha g)(y)(m) = \int_G f(x)(m) g(x^{-1}y)(\alpha(x)^{-1}m) ~dx.$$
\begin{theorem}
    Let $M$ be a second-countable locally compact Hausdorff space, $A = C_\infty(M) \rtimes_\alpha G$. Let $\sigma$ be an irreducible nondegenerate representation of $A$ and let $(\pi, U)$ be the covariant representation of $\sigma$, $I = \ker \pi$. Let $Z \subseteq M$ be the hull of $I$. Then there is an $\alpha$-orbit whose closure is $Z$.
\end{theorem}
    Notice that $I$ is $\alpha$-invariant, hence an ideal of $A$. Expanding out the definitions, $I$ is the set of $f$ whose supports are disjoint from $Z$. In particular, $Z$ is closed and $\alpha$-invariant and $A/I = C_\infty(Z)$. The theorem says that there is a $m_0 \in M$ such that
    $$Z = \overline{\{\alpha(x)m_0: x \in G\}}.$$
\begin{example}
    For the irrational rotation, every orbit-closure is the entire circle, so for every ideal, the hull is the entire space. This generalizes to various ergodic actions.
\end{example}
\begin{proof}[Proof of theorem]
    Since $M$ is second-countable, so is $Z$. Let $\{B_n\}_n$ be open subsets of $M$ such that the $B_n \cap Z$ form a countable base for the topology of $Z$, $B_n \cap Z$ nonempty. Let
    $$O_n = \bigcup_{x \in G} \alpha(x)(B_n).$$
    Then the $O_n$ are open, $\alpha$-invariant, and meet $Z$.

    Let $J_n = C_\infty(O_n) \subseteq C_\infty(M)$. Since $O_n \cap Z$ is nonempty, there is a $f \in J_n$ which is not identically zero on $Z$, by Urysohn's lemma. So $\pi(J_n)$ is nonzero. Since $\sigma$ is nondegenerate, so is $\pi$, and $\pi(J_n)H$ generates a nonzero closed $\sigma$-invariant subspace. Since $\sigma$ is irreducible, $\pi(J_n)H$ generates $H$.

    Let $\xi$ be a unit vector of the representation space $H$. Define a Radon probability measure $\mu$ on $M$ by
    $$\int_M f~d\mu = \langle \pi(f)\xi, \xi\rangle.$$
    If $f \in I$, $f = 0$ $\mu$-almost everywhere. Therefore $Z$ contains the support of $\mu$. Since $M$ is second-countable, $J_n$ is a separable $C^*$-algebra and we can find a countable normalized approximate unit $\{e_{n,m}\}_m$ of $J_n$. We can assume that the $e_{n,m}$ are compactly supported in $O_n$. Since $\pi|_{J_n}$ is nondegenerate,
    $$\lim_{m \to \infty} \pi(e_{n,m})\xi = \xi.$$
    The $e_{n,m}$ are supported on $O_n$, so $O_n$ contains the support of $\mu$. Therefore
    $$\supp \mu \subseteq \bigcap_{n=1}^\infty O_n \cap Z.$$
    (Here we are using the cardinality assumption; the complements must be $\mu$-null and there are only countably many of them.)
    Since $\mu$ is a probability measure, $\supp \mu$ is nonempty.

    Let $m_0 \in \supp \mu$. Each of the $O_n$ is $\alpha$-invariant, so $\alpha_G(m_0) \subseteq \supp \mu$. So for each $n$, $\alpha_G(m_0) \subseteq O_n \cap Z$. Since $\alpha_G(m_0)$ is contained in every element of an open base of $Z$, $\alpha_G(m_0)$ is dense in $Z$.
\end{proof}
\begin{example}
    Let $M$ be the two-point compactification of $\RR$. Then the action of $\RR$ on $M$ by translation is jointly continuous, and $\RR$ is a dense orbit, but the boundary points $\pm \infty$ are fixed points. So not every point has a dense orbit. We will study $C(M) \rtimes \RR$ soon.
\end{example}
    Let $\alpha$ be an action of $G$ on $M$. For $m \in M$, let $G_m$ be the stabilizer of $m$. By the orbit-stabilizer theorem, the map
\begin{align*}
    G/G_m &\to \alpha_G(m)\\
    x &\mapsto \alpha_{xG_m}(x)
\end{align*}
    is a bijection (where $xG_m$ is the coset of $G_m$ by $x$). Now $G_m$ is a closed normal subgroup so $G/G_m$ is a locally compact group. In general the orbit-stabilizer map $G/G_m \to \alpha_G(m)$ is not a homeomorphism. It is favorable that the orbit of $x$ is open in its closure, in which case the orbit is locally compact. 
\begin{theorem}
    Let $m_0 \in M$. If $G$ is a second countable group which acts on $M$ by $\alpha$, and $\alpha_G(m_0)$ is locally compact, then $G/G_{m_0} \to \alpha_G(m_0)$ is a homeomorphism.
\end{theorem}
\begin{proof}
    Use the Baire category theorem on the locally compact space $\alpha_G(m_0)$.
\end{proof}
    Let $H$ be a closed normal subgroup and let $M = G/H$. Then $G$ acts on $M$ by left translation, and $A = C_\infty(M) \rtimes G$ is a $C^*$-algebra. If $H = G$, then $A = C^*(G)$. If $H = 0$, then $A = C_\infty(G) \rtimes G$.

    In case $H = 0$, we study the covariant representation on $L^2(G)$ given by $U$ the left regular representation, $\pi$ the representation by pointwise representation; i.e.
        $$\pi(f)(\xi)(x) = f(x)\xi(x).$$
    To see covariance, we compute
    $$U(x)\pi(f)(\xi)(y) = \pi(f)(\xi)(x^{-1}y) = f(x^{-1}y) \xi(x^{-1}y) = \pi(\alpha(x)(f))(U(x)(\xi))(y).$$
\begin{definition}
    The \dfn{Schrodinger representation} of a group $G$ is the covariant representation $(\pi, U)$ of $C_\infty(G) \rtimes_G$ on $L^2(G)$ given above.
\end{definition}
    We compute the integrated form $\sigma$ of the Schrodinger representation by realizing that
    $$C_c(G \to A) = C_c(G \to C_\infty(G))$$
    is generated by $C_c(G \times G)$. Given $F \in C_c(G \times G)$ we have
    \begin{align*}\sigma(F)(\xi)(x) &= \left(\int_G \pi(F(y))U(y)(\xi) ~dy \right)(x)
    \\&= \int_G F(y, x) \xi(y^{-1}x) ~dy.
    \end{align*}
    Now $f, g \in C_c(G)$ can be viewed as elements of $L^2(G)$, which has a rank-$1$-operator-valued inner product $\langle\cdot,\rangle\cdot_0$. In fact,
    \begin{align*}\langle f, g\rangle_0(\xi)(x) &= f(x) \langle g, \xi\rangle(x) \\
    &= f(x) \int_G \overline{g(y)}\xi(y) ~dy
    \\&= \int_G f(x) \overline{g(y^{-1})} \xi(y^{-1}) \Delta(y^{-1}) ~dy\\
    &= \int_G f(x) g(y^{-1}x) \xi(y^{-1}x) \Delta(y^{-1}x) ~dy.
    \end{align*}
    We define
    $$\langle f, g\rangle_E (x, y) = f(x) \overline{g(y^{-1}x)} \Delta(y^{-1}x).$$
    Then this is an inner product which has values in $C_c(G \times G)$. Let $E$ be the (algebraic) span of
    $$\{\langle f, g\rangle_E: f,g \in C_c(G)\}.$$
    Thus
    $$\langle f, g\rangle_E * \langle h, k\rangle_E = \langle \langle f, g\rangle_E h, k\rangle_E$$
    and
    \begin{align*}\pi(\langle f, g\rangle_E) \pi(\langle h, k\rangle_E) &= \langle f, g\rangle_0 \langle f, g\rangle_0 = \langle \langle f, g\rangle_0 h, k\rangle_0 \\
    &= \langle g, h\rangle \langle f, k\rangle_0 = \pi(\langle g, h\rangle \langle f, k\rangle_E)
    \end{align*}
    allows us to define
    $$\langle f, g\rangle_E * \langle h, k\rangle_E = \langle g, h\rangle \langle f, k\rangle_E.$$
    This defines a convolution on $E$ which is compatible with the convolution on $C^*(G, C_\infty(G))$. Therefore $E$ is a subalgebra of $C^*(G, C_\infty(G))$. Clearly $E$ is a $*$-algebra since
    $$\langle f, g\rangle_E = \langle g, f\rangle_E.$$
    Moreover, $C_c(G)$ is dense in $L^2(G)$, so $\pi(E)$ is dense in $B_0(H)$.

    We claim that $E$ is also closed under pointwise multiplication. In fact,
\begin{align*}
    \langle f, g\rangle_E\langle h, k\rangle_E(x, y) &= f(x)\overline{(\Delta g)}(y^{-1}x) h(x) \overline{(\Delta k)}(y^{-1}x)\\
        &= f(x)g(x) \overline{\Delta g}k(y^{-1}x) \Delta(y^{-1}x). 
\end{align*}
    Clearly $E$ is closed under complex conjugation and separates points of $G \times G$ from zero. Thus we can apply the Stone-Weierstrass theorem, but this is not very interesting because we actually want to prove that $E$ is dense in $C_c(G \times G)$ for the inductive limit topology. In fact, if $O$ is an open, precompact subset of $G \times G$, we can find $V \times W \subseteq G \times G$, where $V,W$ are open, precompact subsets of $G$ and consider the algebraic span of $\langle C_c(V), C_c(W)\rangle_E$. By the Stone-Weierstrass theorem, this is $L^\infty$-dense in $C_c(V \times W)$. One can then check that $E$ is dense in $L^1(G \to C_\infty(G))$ and hence dense in $C^*(G, C_\infty(G))$.

    We claim that $E$ has the same operator norm as $C^*(G, C_\infty(G))$. In fact if $f_1, \dots, f_n$ are an $L^2$-orthonormal set in $C_c(G)$ then the $\langle f_j, f_k\rangle_0$ span the $C^*$-algebra $\CC^{n \times n}$ once we choose a basis. On $C^*$-algebras the operator norm is uniquely determined, so $E$ agrees with $C^*(G, C_\infty(G))$ in operator norm on any finite-dimensional subalgebra. Such matrix algebras can be used to approximate $C^*(G, C_\infty(G))$ so we have proven the claim. We consider that we have proven the following theorem.
\begin{theorem}
    $C_\infty(G) \rtimes G = B_0(L^2(G))$.
\end{theorem}
    Since $B_0(L^2(G))$ has no proper ideals, one also has $C_\infty(G) \rtimes^r G = B_0(L^2(G))$. Therefore the translation action is amenable.
\begin{example}
    If $G$ is not an amenable group, then $G$ still admits an amenable action by translation.
\end{example}
    Now if $G$ acts on $X$ by $\alpha$, and $O$ is an orbit of $\alpha$, then if $O$ is an orbit which is open in its closure, $C_\infty(O) \subseteq C(\overline O)$. Moreover, $C_\infty(O) \rtimes_\alpha G = B_0(L^2(G))$.
\begin{example}
    Let $\RR$ act on its two-point compactification $X$ by translation. Then $C_\infty(X) = C(X)$ contains $C_\infty(\RR)$. So
    $$C(X) \rtimes \RR \supset C_\infty(\RR) \rtimes \RR = B_0(L^2(\RR))$$
    which gives a GCR representation of $C(X)$ on $L^2(\RR)$. It is not CCR because $C(X)$ is unital.

    If we instead look at the orbits of $\pm \infty$, we see that $C^*(\RR) = C(\pm\infty) \rtimes_\alpha \RR$. By the Fourier transform, $\widehat{C^*(\RR)} = \RR$. (More generally, if $G$ is a locally compact abelian group, then $C^*(G)$ is a commutative $C^*$-algebra, $\widehat{C^*(G)}$ consists of one-dimensional representations of $G$, which are exactly the continuous morphisms $G \to S^1$.)
\end{example}
\begin{definition}
    Let $H$ be a closed normal subgroup of $G$. For simplicity we assume that the Haar measure on $G/H$ is $G$-invariant. Let $V: H \to U(K)$ be a unitary representation. We define a Hilbert space by taking all functions $\xi: G \to K$ such that for all $x \in G$, $s \in H$, $\xi(xs) = V(s)^* \xi(x)$ where we define $\langle \xi, \eta\rangle(x) = \langle \xi(x), \eta(x)\rangle$. Since $\langle \xi, \eta\rangle$ is constant on cosets, it drops to a function on $G/H$ such that
    $$\langle \xi, \eta\rangle(x) = \int_{G/H} \langle \xi, \eta\rangle(x) ~dx.$$
    We take the Hilbert space to be all $\xi$ such that $\langle \xi, \xi\rangle < \infty$, which $G$ acts on by left translation. This action of $G$ is called the \dfn{induced representation} of $G$ from $V$, $\Ind V$.
\end{definition}
    If $H,V$ are as above, $\alpha$ the action of $G$ on $C_\infty(G/H)$ by left translation, then we obtain a covariant representation of $\alpha$ on the induced representation space by letting $C_\infty(G/H)$ act by left translation and $\lambda$ be the left action of $G$ on $G/H$. Then $(C_\infty(G/H), \lambda)$ is a covariant representation of $\alpha$.

    Let $G$ be a unimodular group (though the same argument goes through without too much trouble otherwise). Recall that $C_c(G/H \to G) \subseteq C(G/H) \rtimes_\alpha G$. We define for $f, g \in C^*(H)$,
    $$\langle f, g\rangle_{C^*(H)} = f^* * g|_H.$$
    Here we are using continuity; if $H$ is a Haar null set then the restriction map is not defined for measurable functions in general. Let $B = C_c(G/H \to G)$. Then we can define
    $$\langle f,g\rangle_B h = f \langle g, h\rangle_{C^*(H)}.$$
    One can then prove $C(G/H) \rtimes_\alpha G$ is strongly Morita equivalent to $C^*(H)$. This theory generalizes to when $G$ is merely a groupoid rather than a group.
\section{Semidirect products of groups}
\begin{definition}
    If $N$ and $Q$ are locally compact groups, and $\alpha: Q \to \Aut(N)$ a jointly continuous action, then we define $N \rtimes_\alpha Q$ as follows. As a Hausdorff space, $N \rtimes_\alpha Q$ is the product of topological spaces $N \times Q$. The group operation is defined by
    $$(n_1, q_1)(n_2, q_2) = (n_1\alpha(q_1)(n_2), q_1q_2).$$
    Then $N \rtimes_\alpha Q$ is the \dfn{semidirect product} of locally compact groups.
\end{definition}
    We remember the group operation on $N \rtimes_\alpha Q$ by recalling that ``whenever we want to commute an $n$ and a $q$, the $q$ must act on the $n$."

    Let $G = N \rtimes_\alpha Q$. Then $Q$ and $N$ embed in $G$ in the obvious way and we have a split exact sequence
    $$0 \to N \to G \to Q \to 0.$$
    Therefore any representation of $G$ restricts to representations of $N$ and $Q$. Moreover, $Q$ acts on $N$ by inner automorphisms, i.e.
    $$qnq^{-1} = \alpha(q)(n).$$
    The action of $q$ does not preserve Haar measure, but it does send Haar measure to a translation-invariant measure; i.e. it multiplies Haar measure by a scalar, say $\sigma(q)$.

    We now define an action of $Q$ on $C^*(N)$. In fact, for $f \in C_c(N)$, $n \in N$, $q \in Q$,
    $$\alpha(q)(f)(n) = \sigma(q)f(\alpha(q)(n)).$$
    Then $\alpha(q)$ is an isometry in $L^1$-norm, so $Q$ acts on $L^1(N)$ by isometries. This action $\alpha$ immediately extends to $C^*(N)$.

    Let $U$ be a unitary representation of $G$. Restricting, we obtain representations of $C^*(N)$ and $Q$, and $U$ is a covariant representation of $\alpha: Q \to \Aut(C^*(N))$. Conversely, a representation of $C^*(N) \rtimes_\alpha Q$ gives rise to a covariant representation of $\alpha$. Then
    $$C^*(N) \rtimes_\alpha Q = C^*(G).$$
    This can be remembered as $C^*(N) \rtimes_\alpha Q = C^*(N \rtimes_\alpha Q)$.

    Let $N$ be an abelian group. Then $C^*(N) = C_\infty(\hat N)$ (where $\hat N$ denotes the Fourier transform, $\hat N = \Hom(N, S^1)$ in the category of locally compact groups). Since $Q$ acts on $N$ and hence $C^*(N)$, $Q$ also acts on $\hat N$. In fact if $\varphi \in \hat N$, then
    $$\alpha(q)(\varphi)(n) = \varphi(\alpha(q^{-1})(n)).$$
    Then $C^*(N \rtimes_\alpha Q) = C_\infty(\hat N) \rtimes_\alpha Q$. Thus we are back in the original situation of a locally compact group acting on a locally compact space.
\begin{example}[Wigner 1939]
    Let $L$ be the \dfn{Lorentz group}, the automorphism group of Minkowski spacetime (linear automorphisms that preserve the Lorentzian metric.) Then $L$ acts on $\RR^4$, so we have a semidirect product $\RR^4 \rtimes L$, the \dfn{Poincare group}. The unitary representations of the Poincare group are important in relativistic quantum mechanics. Elementary particles ``should be" completely determined by their symmetries, so correspond to representations of certain stabilizers of $\RR^4 \rtimes L$. This paper led to the discovery that electrons have spin. In principle one could use the representation theory of $\RR^4 \rtimes L$ to rederive the periodic table of elements.
\end{example}
\begin{example}[Heisenberg]
    The \dfn{Heisenberg commutation relations} require that the position $q$ and momentum $p$ observables act on $L^2$ of space with
    $$[p, q] = i\hbar.$$
    They must be unbounded operators, since their commutator is a scalar. So $q, p$ are not elements of a $C^*$-algebra.
\end{example}



\newpage
\printindex

\end{document}